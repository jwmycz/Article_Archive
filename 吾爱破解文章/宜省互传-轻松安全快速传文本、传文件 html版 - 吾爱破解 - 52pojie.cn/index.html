 <!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<meta content="webkit" name="renderer">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<title>宜省互传-轻松安全快速传文本、传文件 html版 - 吾爱破解 - 52pojie.cn </title>
<link href="https://www.52pojie.cn/thread-2085764-1-1.html" rel="canonical"/>
<meta content="宜省互传-轻松安全快速传文本、传文件 html版" name="keywords"/>
<meta content="简单、好用，在不方便的登录各种账号的时候直接访问网页打开即用。支持在线聊天、在线传文件体验地址：https://diuta.com/chuan3.htmlhtml代码如下，保存就可 ... " name="description"/>
<meta content="Discuz!" name="generator"/>
<meta content="True" name="MSSmartTagsPreventParsing"/>
<meta content="Yes" http-equiv="MSThemeCompatible"/>

<link href="/favicon.svg" rel="mask-icon"/>
<link href="/favicon.svg" rel="icon" type="image/svg+xml"/>
<link href="apple-touch-icon.png" rel="apple-touch-icon"/>
<link href="apple-touch-icon.png" rel="apple-touch-icon" size="180x180"/>
<link href="apple-touch-icon-167x167.png" rel="apple-touch-icon" size="167x167"/>
<link href="apple-touch-icon-152x152.png" rel="apple-touch-icon" size="152x152"/><link href="https://static.52pojie.cn/cache/style_1_common.css?BC3" rel="stylesheet" type="text/css"><link href="https://static.52pojie.cn/cache/style_1_forum_viewthread.css?BC3" rel="stylesheet" type="text/css"><link href="./template/default/style/t5/style.css" id="css_extstyle" rel="stylesheet" type="text/css">
<meta content="吾爱破解 - 52pojie.cn" name="application-name"/>
<meta content="吾爱破解 - 52pojie.cn" name="msapplication-tooltip"/>
<meta content="name=门户;action-uri=https://www.52pojie.cn/portal.php;icon-uri=https://static.52pojie.cn/static/image/common/portal.ico" name="msapplication-task"/>
<meta content="name=网站;action-uri=https://www.52pojie.cn/forum.php;icon-uri=https://static.52pojie.cn/static/image/common/bbs.ico" name="msapplication-task"/>
<link href="https://www.52pojie.cn/archiver/" rel="archives" title="吾爱破解 - 52pojie.cn">
<link href="https://static.52pojie.cn/cache/style_1_widthauto.css?BC3" id="css_widthauto" rel="stylesheet" type="text/css">
<link href="https://static.52pojie.cn/cache/style_1_responsive.css?BC3" id="css_responsive" rel="stylesheet" type="text/css">
</link></link></link></link></link></link></meta></head>
<body class="pg_viewthread" id="nv_forum" onkeydown="if(event.keyCode==27) return false;">
<div id="append_parent"></div><div id="ajaxwaitid"></div>
<div class="cl" id="toptb">
<div class="wp">
<div class="z"><a href="https://space.bilibili.com/544451485" rel="nofollow" target="_blank">官方bilibili</a><a href="thread-582852-1-1.html" style="color: red" target="_blank">Windows破解入门</a><a href="thread-408645-1-1.html" style="color: red" target="_blank">Android逆向入门</a></div>
<div class="y">
<a class="switchblind" href="javascript:;" id="switchblind" onclick="toggleBlind(this)" title="开启辅助访问"></a>
<a href="thread-209287-1-1.html" target="_blank" title="修复各种访问不了论坛、访问论坛异常、验证码异常等各种问题的大杀器！">【网络诊断修复工具】</a><a class="switchwidth" href="javascript:;" id="switchwidth" onclick="widthauto(this)" title="切换到窄版">切换到窄版</a>
<a href="javascript:;" id="sslct" onmouseover="delayShow(this, function() {showMenu({'ctrlid':'sslct','pos':'34!'})});">切换风格</a></div>
</div>
</div>
<ul class="p_pop" disautofocus="true" id="myprompt_menu" style="display: none;">
<li><a href="home.php?mod=space&amp;do=pm" id="pm_ntc" style="background-repeat: no-repeat; background-position: 0 50%;"><em class="prompt_news_0"></em>消息</a></li>
<li><a href="home.php?mod=follow&amp;do=follower"><em class="prompt_follower_0"></em>新听众</a></li>
<li><a href="home.php?mod=space&amp;do=notice&amp;view=mypost"><em class="notice_mypost"></em>我的帖子(<span class="rq">1</span>)</a></li>
<li class="ignore_noticeli"><a href="javascript:;" onclick="setcookie('ignore_notice', 1);hideMenu('myprompt_menu')" title="暂不提醒"><em class="ignore_notice"></em></a></li>
</ul>
<div class="cl p_pop" id="sslct_menu" style="display: none;">
<span class="sslct_btn" onclick="extstyle('./template/default/style/t1')" title="红"><i style="background:#BA350F"></i></span>
<span class="sslct_btn" onclick="extstyle('./template/default/style/t2')" title="青"><i style="background:#429296"></i></span>
<span class="sslct_btn" onclick="extstyle('./template/default/style/t3')" title="橙"><i style="background:#FE9500"></i></span>
<span class="sslct_btn" onclick="extstyle('./template/default/style/t4')" title="紫"><i style="background:#9934B7"></i></span>
<span class="sslct_btn" onclick="extstyle('./template/default/style/t5')" title="蓝"><i style="background:#0053B9"></i></span>
</div>
<ul class="p_pop" id="myitem_menu" style="display: none;">
<li><a href="forum.php?mod=guide&amp;view=my">帖子</a></li>
<li><a href="home.php?mod=space&amp;do=favorite&amp;view=me">收藏</a></li>
<li><a href="home.php?mod=space&amp;do=friend">好友</a></li>
</ul>
<div class="p_pop" id="qmenu_menu" style="display: none;">
<ul class="cl nav"><li><a href="forum.php?mod=guide" style="background-image:url(https://static.52pojie.cn/static/image/feed/guide_b.png) !important">导读</a></li>
<li><a href="forum.php?mod=guide&amp;view=my" style="background-image:url(https://static.52pojie.cn/static/image/feed/thread_b.png) !important">帖子</a></li>
<li><a href="home.php?mod=space&amp;do=favorite&amp;view=me" style="background-image:url(https://static.52pojie.cn/static/image/feed/favorite_b.png) !important">收藏</a></li>
<li><a href="forum.php?mod=collection&amp;op=my" style="background-image:url(https://static.52pojie.cn/static/image/feed/collection_b.png) !important">淘帖</a></li>
<li><a href="home.php?mod=medal" style="background-image:url(https://static.52pojie.cn/static/image/feed/medal_b.png) !important">勋章</a></li>
<li><a href="home.php?mod=task" style="background-image:url(https://static.52pojie.cn/static/image/feed/task_b.png) !important">任务</a></li>
<li><a href="home.php?mod=space&amp;do=friend" style="background-image:url(https://static.52pojie.cn/static/image/feed/friend_b.png) !important">好友</a></li>
<li><a href="misc.php?mod=ranklist" style="background-image:url(https://static.52pojie.cn/static/image/feed/ranklist_b.png) !important">排行榜</a></li>
<li><a href="home.php?mod=spacecp&amp;ac=credit&amp;op=buy" style="background-image:url(https://static.52pojie.cn/static/image/feed/money.png) !important" title="论坛币捐助充值入口。">充值</a></li>
</ul>
<div class="btda" id="fjump_menu"></div></div><div id="hd">
<div class="wp">
<div class="hdc cl"><h2><a href="./" title="吾爱破解 - 52pojie.cn"><img alt="吾爱破解 - 52pojie.cn" border="0" src="../common_images/logo.png"/></a></h2><div id="um">
<div class="avt y"><a href="home.php?mod=space&amp;uid=588268"><img onerror="this.onerror=null;this.src='https://avatar.52pojie.cn/images/noavatar_small.gif'" src="../common_images/68_avatar_small.jpg"/></a></div>
<p>
<strong class="vwmy"><a href="https://github.com/jwmycz" target="_blank" style="color: #0366d6; text-decoration: none;">微信公众号：将往的爬虫逆向日记</a></strong>
<span class="pipe">|</span><a href="connect.php?mod=config" target="_blank"><img align="absmiddle" alt="QQ绑定" class="qq_bind" src="../common_images/qq_bind_small.gif"/></a>
<span class="pipe">|</span><a class="showmenu a" href="home.php?mod=space&amp;do=reward&amp;view=me" id="rewards" onmouseover="showMenu({'ctrlid':'rewards'})"><em class="showtipex"></em>悬赏</a><span class="pipe">|</span><a class="showmenu" href="javascript:;" id="myitem" onmouseover="showMenu({'ctrlid':'myitem'});">我的</a>
<span class="pipe">|</span><a href="home.php?mod=spacecp">设置</a>
<span class="pipe">|</span><a href="home.php?mod=space&amp;do=pm" id="pm_ntc">消息</a>
<span class="pipe">|</span><a class="a showmenu new" href="home.php?mod=space&amp;do=notice" id="myprompt" onmouseover="showMenu({'ctrlid':'myprompt'});">提醒(1)</a><span id="myprompt_check"></span>
<span class="pipe">|</span><a href="member.php?mod=logging&amp;action=logout&amp;formhash=7f5fdc25">退出</a>
</p>
<p>
<img align="absmiddle" alt="" class="qq_bind" src="../common_images/wbs.png"/> <span class="pipe">|</span><a class="showmenu" href="home.php?mod=spacecp&amp;ac=credit&amp;showcredit=1" id="extcreditmenu" onmouseover="delayShow(this, showCreditmenu);">积分: 232</a>
<span class="pipe">|</span><a class="showmenu" href="home.php?mod=spacecp&amp;ac=usergroup" id="g_upmine" onmouseover="delayShow(this, showUpgradeinfo)">用户组: 前途无量</a>
</p>
</div>
</div>
<div id="nv">
<a href="javascript:;" id="qmenu" onmouseover="delayShow(this, function () {showMenu({'ctrlid':'qmenu','pos':'34!','ctrlclass':'a','duration':2});showForummenu(24);})">快捷导航</a>
<ul><li id="mn_portal"><a hidefocus="true" href="portal.php" title="吾爱破解门户">门户<span>吾爱破解门户</span></a></li><li class="a" id="mn_forum"><a hidefocus="true" href="/" title="吾爱破解论坛">网站<span>吾爱破解论坛</span></a></li><li id="mn_Na063" onmouseover="showMenu({'ctrlid':this.id,'ctrlclass':'hover','duration':2})"><a hidefocus="true" href="forum.php?mod=guide&amp;view=newthread" style="color: yellow" title="吾爱破解论坛新帖导读">新帖<span>吾爱破解论坛新帖导读</span></a></li><li id="mn_forum_11"><a hidefocus="true" href="forum.php?mod=collection" title="吾爱破解文章专辑列表">专辑<span>吾爱破解文章专辑列表</span></a></li><li id="mn_home_4" onmouseover="showMenu({'ctrlid':this.id,'ctrlclass':'hover','duration':2})"><a hidefocus="true" href="home.php" title="Space">家园<span>Space</span></a></li><li id="mn_N12a7"><a hidefocus="true" href="misc.php?mod=ranklist" title="吾爱破解排行榜">排行榜<span>吾爱破解排行榜</span></a></li><li id="mn_N05be"><a hidefocus="true" href="thread-143136-1-1.html" target="_blank" title="吾爱破解论坛总版规">总版规<span>吾爱破解论坛总版规</span></a></li><li id="mn_N34c9"><a hidefocus="true" href="forum-15-1.html" target="_blank" title="吾爱破解论坛欢迎大家积极举报违规帖子!">投诉举报<span>吾爱破解论坛欢迎大家积极举报违规帖子!</span></a></li><li id="mn_Na678" onmouseover="showMenu({'ctrlid':this.id,'ctrlclass':'hover','duration':2})"><a hidefocus="true" href="https://down.52pojie.cn" style="font-weight: bold;color: yellow" target="_blank" title="爱盘，在线破解工具包，实时提供最新逆向资源！">爱盘<span>爱盘，在线破解工具包，实时提供最新逆向资源！</span></a></li><li id="mn_N0a2c"><a hidefocus="true" href="misc.php?mod=faq" title="吾爱破解论坛常见问题解答中心">帮助<span>吾爱破解论坛常见问题解答中心</span></a></li></ul>
<a href="javascript:;" onclick="showWindow('csu_wechat_scan_scan','plugin.php?id=csu_wechat_scan:scan','get',0);return false;" style="float: right;display: inline;margin-top: 5px;margin-left: 3px;margin-right: 3px;">
<img alt="ganzhuweixin" src="../common_images/scan.gif"/>
</a></div>
<ul class="p_pop h_pop" id="mn_Na063_menu" style="display: none"><li><a hidefocus="true" href="home.php?mod=follow&amp;view=follow" style="color: red" target="_blank">关注人的新帖</a></li><li><a hidefocus="true" href="forum.php?mod=guide&amp;view=tech" style="color: blue" target="_blank">技术新帖合集</a></li><li><a hidefocus="true" href="forum.php?mod=guide&amp;view=soft" style="color: green" target="_blank">最新软件合集</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=2&amp;filter=author&amp;orderby=dateline" target="_blank">原创发布新贴</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=5&amp;filter=author&amp;orderby=dateline" target="_blank">脱壳破解新帖</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=65&amp;filter=author&amp;orderby=dateline" target="_blank">移动安全新帖</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=32&amp;filter=author&amp;orderby=dateline" target="_blank">病毒分析新帖</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=59&amp;filter=author&amp;orderby=dateline" target="_blank">软件调试新贴</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=6&amp;filter=author&amp;orderby=dateline" target="_blank">动画发布新帖</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=24&amp;filter=author&amp;orderby=dateline" target="_blank">编程语言新帖</a></li></ul><ul class="p_pop h_pop" id="mn_home_4_menu" style="display: none"><li><a hidefocus="true" href="home.php?mod=spacecp&amp;ac=invite" style="font-weight: bold;color: red" title="通过购买邀请码邀请好友注册论坛">邀请好友注册</a></li></ul><div class="p_pop h_pop" id="mn_userapp_menu" style="display: none"></div><ul class="p_pop h_pop" id="mn_Na678_menu" style="display: none"><li><a hidefocus="true" href="https://down.52pojie.cn/Tools/" target="_blank">Tools</a></li><li><a hidefocus="true" href="https://down.52pojie.cn/Logo/" target="_blank">吾爱破解Logo</a></li><li><a hidefocus="true" href="https://down.52pojie.cn/Logo/Wallpaper/" target="_blank">吾爱破解桌面壁纸</a></li><li><a hidefocus="true" href="https://down.52pojie.cn/%E5%90%BE%E7%88%B1%E7%A0%B4%E8%A7%A3%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/" target="_blank">吾爱破解视频教程</a></li><li><a hidefocus="true" href="https://down.52pojie.cn/%E5%90%BE%E7%88%B1%E7%A0%B4%E8%A7%A3%E8%AE%BA%E5%9D%9B%E7%B2%BE%E5%8D%8E%E9%9B%86/" target="_blank">吾爱破解论坛精华集</a></li><li><a hidefocus="true" href="https://down.52pojie.cn/Tools/Debuggers/" target="_blank">吾爱破解专用版Ollydbg</a></li></ul><ul class="p_pop h_pop" id="mn_Ndb2c_menu" style="display: none"><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=15&amp;filter=typeid&amp;typeid=182&amp;orderby=dateline">处理举报贴</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=72&amp;filter=author&amp;orderby=dateline">处理站务贴</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=66&amp;filter=author&amp;orderby=dateline">处理福利贴</a></li><li><a hidefocus="true" href="forum.php?mod=forumdisplay&amp;fid=10&amp;filter=author&amp;orderby=dateline">处理水区贴</a></li><li><a hidefocus="true" href="forum-23-1.html">办公区</a></li><li><a hidefocus="true" href="forum-34-1.html">证据区</a></li></ul><div class="cl" id="mu">
</div><div class="comiis_nav">
<ul class="nav_ico02">
<li><a href="forum-2-1.html" target="_blank" title="吾爱破解坛友原创作品展示，包含Windows原创工具，也有Android、iOS和Mac OS程序相应的原创程序！"><font color="green">原创发布区</font></a></li>
<li><a href="forum-16-1.html" target="_blank" title="精品软件推荐，软件交流天地，汇集众多精彩评论，热心会员每日更新。找你所需要的，给你我分享的！">精品软件区</a></li>
<li><a href="forum-4-1.html" target="_blank" title="加密解密相关软件发布区，包含最新最全的软件加密解密相关工具，工欲善其事必先利其器！"><font color="green">逆向资源区</font></a></li>
<li><a href="forum-10-1.html" target="_blank" title="据说人滴祖先生活在水里">水漫金山区</a></li>
<li><a href="forum-50-1.html" target="_blank" title="你的计算机又受到病毒的侵扰使你不知所措了？不要着急，让我们一起帮助你解决问题！"><font color="green">病毒救援区</font></a></li>
<li><a href="forum-66-1.html" target="_blank" title="福利资讯、经验分享">福利经验区</a></li>
</ul>
<ul class="nav_ico03">
<li><a href="forum-5-1.html" target="_blank" title="讨论Windows软件脱壳分析、软件逆向分析、代码逆向改造、虚拟机加密分析，也包括Mac OS等其他平台程序逆向分析一切尽在此！"><font color="blue">脱壳破解区</font></a></li>
<li><a href="forum-65-1.html" target="_blank" title="讨论Android软件脱壳分析、Android软件逆向分析、Android系统安全分析、Android软件加密分析，当然iOS等移动程序逆向分析一切尽在此！"><font color="red"><b>移动安全区</b></font></a></li>
<li><a href="forum-32-1.html" target="_blank" title="分析研究病毒木马技术，预防病毒木马，查杀病毒木马"><font color="blue">病毒分析区</font></a></li>
<li><a href="forum-24-1.html" target="_blank" title="学习编程探讨编程技巧，共同分享程序源代码">编程语言区</a></li>
<li><a href="forum-6-1.html" target="_blank" title="软件脱壳、软件汉化、软件逆向相关动画教程，学习心得分享。在这里我们可以携手并进，是我们汲取知识的伟大航路！"><font color="blue">动画发布区</font></a></li>
<li><a href="forum-41-1.html" target="_blank" title="工欲善其事 必先利其器，从这里能找到你想要的利器">安全工具区</a></li>
</ul>
<ul class="nav_ico01">
<li><a href="forum-13-1.html" target="_blank" title="开放注册信息，版块调整公告，站点信息发布，会员违规处理等"><font color="red"><b>站点公告</b></font></a></li>
<li><a href="thread-147931-1-1.html" target="_blank" title="【吾爱破解站点导航帖】 - [让你快速融入吾爱破解大家庭]">站点导航</a></li>
<li><a href="thread-143136-1-1.html" target="_blank" title="吾爱破解站点总版规！"><font color="blue"><b>站点总版规</b></font></a></li>
<li><a href="forum-25-1.html" target="_blank" title="会员、版主、勋章、友情链接申请，发帖前请认真阅读本版规则！本区可以匿名发帖、跟帖相应的申请！">申请专区</a></li>
<li><a href="forum-39-1.html" target="_blank" title="此版块只允许发布招聘和求职相关信息！本区可以匿名发帖，欢迎正规公司前来发布招聘信息！"><font color="green"><b>招聘求职</b></font></a></li>
<li><a href="thread-309877-1-1.html" target="_blank" title=" 版规速读，主要关于如何给自己加违规和如何消违规"><b>违规怎么办</b></a></li>
</ul>
<ul class="nav_ico04" style="width:80px;">
<li><a href="misc.php?mod=faq" target="_blank" title="有什么问题来这里看看吧，这里有你想知道的内容！"><font color="blue"><b>站点帮助</b></font></a></li>
<li><a href="forum-72-1.html" target="_blank" title="如果你对我们有什么意见或者建议，请在此提出">站务处理</a></li>
</ul>
</div>
<div class="cl" id="scbar">
<form action="search.php?searchsubmit=yes" autocomplete="off" id="scbar_form" method="post" onsubmit="searchFocus($('scbar_txt'))" target="_blank">
<input id="scbar_mod" name="mod" type="hidden" value="search"/>
<input name="formhash" type="hidden" value="7f5fdc25"/><input name="srchtype" type="hidden" value="title"/>
<input name="srhfid" type="hidden" value="24"/>
<input name="srhlocality" type="hidden" value="forum::viewthread"/>
<table cellpadding="0" cellspacing="0">
<tr>
<td class="scbar_icon_td"></td>
<td class="scbar_txt_td"><input autocomplete="off" id="scbar_txt" name="srchtxt" speech="" type="text" x-webkit-speech=""/></td>
<td class="scbar_type_td"><a class="xg1" hidefocus="true" href="javascript:;" id="scbar_type" onclick="showMenu(this.id)">搜索</a></td>
<td class="scbar_btn_td"><button class="pn pnc" id="scbar_btn" name="searchsubmit" sc="1" type="submit" value="true"><strong class="xi2">搜索</strong></button></td>
<td class="scbar_hot_td">
<div id="scbar_hot">
<strong class="xw1">热搜: </strong>
<a class="xi2" href="search.php?mod=forum&amp;srchtxt=ctf&amp;formhash=7f5fdc25&amp;searchsubmit=true&amp;source=hotsearch" sc="1" target="_blank">ctf</a>
<a class="xi2" href="search.php?mod=forum&amp;srchtxt=%D0%C2%CA%D6&amp;formhash=7f5fdc25&amp;searchsubmit=true&amp;source=hotsearch" sc="1" target="_blank">新手</a>
<a class="xi2" href="search.php?mod=forum&amp;srchtxt=%CD%D1%BF%C7&amp;formhash=7f5fdc25&amp;searchsubmit=true&amp;source=hotsearch" sc="1" target="_blank">脱壳</a>
<a class="xi2" href="search.php?mod=forum&amp;srchtxt=%BD%CC%B3%CC&amp;formhash=7f5fdc25&amp;searchsubmit=true&amp;source=hotsearch" sc="1" target="_blank">教程</a>
<a class="xi2" href="search.php?mod=forum&amp;srchtxt=Crackme&amp;formhash=7f5fdc25&amp;searchsubmit=true&amp;source=hotsearch" sc="1" target="_blank">Crackme</a>
</div>
</td>
</tr>
</table>
</form>
</div>
<ul class="p_pop" id="scbar_type_menu" style="display: none;"><li><a fid="24" href="javascript:;" rel="curforum">本版</a></li><li><a class="curtype" href="javascript:;" rel="forum">帖子</a></li><li><a href="javascript:;" rel="user">用户</a></li></ul>
</div>
</div>
<style type="text/css">
@import url('https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/styles/shCore.css?ver=3.0.90');
@import url('https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/styles/shCoreRDark.css?ver=3.0.90');
@import url('https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/styles/shThemeRDark.css?ver=3.0.90');
@import url('https://static.52pojie.cn/mw_syntaxhighlighter/static/css/mw_syntaxhighlighter.css?ver=3.0.90');
.syntaxhighlighter {max-height: 5000px !important;height:expression(this.scrollHeight > 5000 ? "5000px" : "auto");}
.syntaxhighlighter .line {white-space: nowrap !important;}

</style>
<style>
						a#rewards {
							margin-right: 2px !important;
							padding-top: 3px;
							padding-bottom: 3px;
							padding-left: 10px;
							color: #333;
							
						}
						
						em.showtipex, em.showtipli {
							position: relative;
						}
						em.showtipli {
							right: calc(50% - 50px);
						}
						
					</style>
<ul class="p_pop" id="rewards_menu" style="display: none;">
<li><a href="forum.php?mod=forumdisplay&amp;fid=8&amp;filter=specialtype&amp;specialtype=reward&amp;rewardtype=1" target="_blank" title="帮助坛友解决问题,同时争取论坛积分">挣悬赏</a></li>
<li class="noreward"><a href="home.php?mod=space&amp;do=reward&amp;view=me&amp;flag=1" target="_blank" title="请尽快完结您的悬赏">未完结</a></li>
<li><a href="thread-2083678-1-1.html" target="_blank" title="可按撤销规则回帖申请撤销">撤销悬赏</a></li>
</ul>
<div class="wp" id="wp">
<style id="diy_style" type="text/css"></style>
<div class="area" id="diynavtop"></div>
<div class="bm cl" id="pt">
<div class="z">
<a class="nvhm" href="./" title="首页">吾爱破解 - 52pojie.cn</a><em>»</em><a href="/">网站</a> <em>›</em> <a href="forum.php?gid=1">【 软件安全 】</a> <em>›</em> <a href="forum-24-1.html">『编程语言区』</a> <em>›</em> <a href="thread-2085764-1-1.html">宜省互传-轻松安全快速传文本、传文件 html版</a>
</div>
</div>
<style>
					.dropbtn{background-color:#0099cb;color:white;padding:2px 6px;font-size:12px;border:none;cursor:pointer;}
					.dropdown{position:relative;display:inline-block;}
					.dropdown-content{display:none;position:absolute;background-color:#f9f9f9;min-width:80px;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);}
					.dropdown-content a{color:black;padding:10px;text-decoration:none;display:block;text-align:center;}
					.dropdown-content a:hover{background-color:#d0d1f2;}
					.dropdown:hover .dropdown-content{display:block;}
					.dropdown:hover .dropbtn{background-color:#1b64d7;}
				</style>
<style id="diy_style" type="text/css"></style>
<div class="wp">
<div class="area" id="diy1"></div>
</div>
<div class="wp cl" id="ct">
<div class="pgs mbm cl" id="pgt">
<div class="pgt"></div>
<span class="y pgb" id="visitedforums" onmouseover="$('visitedforums').id = 'visitedforumstmp';this.id = 'visitedforums';showMenu({'ctrlid':this.id,'pos':'34'})"><a href="forum-24-1.html">返回列表</a></span>
<a href="javascript:;" id="newspecial" onclick="showWindow('newthread', 'forum.php?mod=post&amp;action=newthread&amp;fid=24')" onmouseover="$('newspecial').id = 'newspecialtmp';this.id = 'newspecial';showMenu({'ctrlid':this.id})" title="发新帖"><img alt="发新帖" src="../common_images/pn_post.png"/></a><a href="javascript:;" id="post_reply" onclick="showWindow('reply', 'forum.php?mod=post&amp;action=reply&amp;fid=24&amp;tid=2085764')" title="回复"><img alt="回复" src="../common_images/pn_reply.png"/></a>
</div>
<ul class="p_pop" id="newspecial_menu" style="display: none">
<li><a href="forum.php?mod=post&amp;action=newthread&amp;fid=24">发表帖子</a></li><li class="poll"><a href="forum.php?mod=post&amp;action=newthread&amp;fid=24&amp;special=1">发起投票</a></li></ul>
<div class="pl bm" id="postlist">
<table cellpadding="0" cellspacing="0">
<tr>
<td class="pls ptn pbn">
<div class="hm ptn">
<span class="xg1">查看:</span> <span class="xi1">35</span><span class="pipe">|</span><span class="xg1">回复:</span> <span class="xi1">1</span>
</div>
</td>
<td class="plc ptm pbn vwthd">
<div class="y">
<a href="forum.php?mod=redirect&amp;goto=nextoldset&amp;tid=2085764" title="上一主题"><img alt="上一主题" class="vm" src="../common_images/thread-prev.png"/></a>
<a href="forum.php?mod=redirect&amp;goto=nextnewset&amp;tid=2085764" title="下一主题"><img alt="下一主题" class="vm" src="../common_images/thread-next.png"/></a>
</div>
<span class="xg1 side_btn">
<a class="btn_s_close" href="javascript:;" onclick="setcookie('close_leftinfo', 1);location.reload();" title="收起左侧"><img alt="收起左侧" class="vm" src="../common_images/control_l.png"/></a>
</span>
<h1 class="ts">
<a href="forum.php?mod=forumdisplay&amp;fid=24&amp;filter=typeid&amp;typeid=299">[<font color="blue">其他原创</font>]</a>
<span id="thread_subject">宜省互传-轻松安全快速传文本、传文件 html版</span>
</h1>
<span class="xg1">
<a href="thread-2085764-1-1.html" onclick="return copyThreadUrl(this)">[复制链接]</a>
</span>
</td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" class="ad">
<tr>
<td class="pls">
</td>
<td class="plc">
</td>
</tr>
</table><div id="post_54634955"><table cellpadding="0" cellspacing="0" class="plhin res-postfirst" id="pid54634955" summary="pid54634955">
<tr>
<td class="pls" rowspan="2">
<div class="pls cl favatar" id="favatar54634955">
<div class="pi">
<div class="authi"><a class="xw1" href="home.php?mod=space&amp;uid=1229473" rel="nofollow" target="_blank">小鸡眯眼</a>
</div>
</div>
<div class="p_pop blk bui card_gender_0" id="userinfo54634955" style="display: none; margin-top: -11px;">
<div class="m z">
<div id="userinfo54634955_ma"></div>
</div>
<div class="i y">
<div>
<strong><a class="xi2" href="home.php?mod=space&amp;uid=1229473" target="_blank">小鸡眯眼</a></strong>
<em>当前在线</em>
</div><dt>好友</dt><dd><a class="xi2" href="home.php?mod=space&amp;uid=1229473&amp;do=friend&amp;view=me&amp;from=space" target="_blank">0</a></dd>
<dt>阅读权限</dt><dd>10</dd>
<span style="color:Blue;"><dt>听众</dt><dd><a class="xi2" href="home.php?mod=follow&amp;do=follower&amp;uid=1229473" target="_blank">1</a></dd>
<dt>最后登录</dt><dd>2026-1-11</dd>
<div class="imicn">
<a href="home.php?mod=space&amp;uid=1229473&amp;do=profile" target="_blank" title="查看详细资料"><img alt="查看详细资料" src="../common_images/userinfo.gif"/></a>
</div>
<div id="avatarfeed"><span id="threadsortswait"></span></div>
</span></div>
</div>
<div>
<div class="avatar" onmouseover="showauthor(this, 'userinfo54634955')"><a class="avtm" href="home.php?mod=space&amp;uid=1229473" rel="nofollow" target="_blank"><img src="../common_images/noavatar_middle.gif"/></a></div>
</div>
<div class="tns xg2"><table cellpadding="0" cellspacing="0"><th><p><a class="xi2" href="home.php?mod=space&amp;uid=1229473&amp;do=thread&amp;type=thread&amp;view=me&amp;from=space">14</a></p>主题</th><th><p><a class="xi2" href="home.php?mod=space&amp;uid=1229473&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space">67</a></p>回帖</th><td><p><a class="xi2" href="home.php?mod=space&amp;uid=1229473&amp;do=profile">43</a></p>积分</td></table></div>
<p class="side-group"><em><a href="home.php?mod=spacecp&amp;ac=usergroup&amp;gid=10" target="_blank">锋芒初露</a></em></p>
<p class="side-star"><span id="g_up54634955" onmouseover="showMenu({'ctrlid':this.id, 'pos':'12!'});"><img alt="Rank: 1" src="../common_images/star_level1.gif"/></span></p>
<div class="tip tip_4" id="g_up54634955_menu" style="display: none;"><div class="tip_horn"></div><div class="tip_c">锋芒初露, 积分 43, 距离下一级还需 157 积分</div></div>
<dl class="pil cl credit-list">
<span amount="0" class="cr-digest">
<dt>精华</dt>
<dd>0</dd>
</span>
<span amount="0 点" class="cr-ext1">
<dt>威望</dt>
<dd>0 点</dd>
</span>
<span amount="28 点" class="cr-ext6">
<dt>热心值</dt>
<dd>28 点</dd>
</span>
<span amount="1 点" class="cr-ext4">
<dt>悬赏值</dt>
<dd>1 点</dd>
</span>
<span class="cr-follower">
<dt>听众</dt>
<dd><a class="xi2" href="home.php?mod=follow&amp;do=follower&amp;uid=1229473" target="_blank">1</a></dd>
</span>
<span amount="0 点" class="cr-ext3">
<dt>贡献值</dt>
<dd>0 点</dd>
</span>
<span class="cr-ext2">
<dt>吾爱币</dt>
<dd>462 CB</dd>
</span>
<span amount="0 次" class="cr-ext8">
<dt>违规</dt>
<dd>0 次</dd>
</span>
<dt>注册时间</dt>
<dd>2019-11-11</dd>
</dl>
<ul class="xl xl2 o cl">
<li class="addflw">
<a class="xi2" href="home.php?mod=spacecp&amp;ac=follow&amp;op=add&amp;hash=7f5fdc25&amp;fuid=1229473" id="followmod_1229473" onclick="showWindow('followmod', this.href, 'get', 0);" title="收听TA">收听TA</a>
</li>
</ul>
<nav class="toc toc-side relative z-1 transition--300 absolute" id="markdown_toc_54634955"></nav></div>
</td>
<td class="plc">
<div class="pi">
<div class="y" id="fj">
<label class="z">电梯直达</label>
<input class="px p_fre z" onkeydown="if(event.keyCode==13) {window.location=$('fj_btn').href;return false;}" onkeyup="$('fj_btn').href='forum.php?mod=redirect&amp;ptid=2085764&amp;authorid=0&amp;postno='+this.value" size="2" title="跳转到指定楼层" type="text"/>
<a class="z" href="javascript:;" id="fj_btn" title="跳转到指定楼层"><img alt="跳转到指定楼层" class="vm" src="../common_images/fj_btn.png"/></a>
</div>
<strong>
<a href="thread-2085764-1-1.html" id="postnum54634955" onclick="setCopy(this.href, '帖子地址复制成功');return false;">
<font color="red"><b>楼主</b></font></a>
</strong>
<div class="pti">
<div class="pdbt">
</div>
<div class="authi">
<img class="authicn vm" id="authicon54634955" src="../common_images/online_member.gif"/>
<span class="res-author"><a class="xi2" href="home.php?mod=space&amp;uid=1229473" target="_blank">小鸡眯眼</a>
</span><em id="authorposton54634955"><span class="poston">发表于</span> 2026-1-11 13:42</em>
<span class="pipe">|</span>
<a href="forum.php?mod=viewthread&amp;tid=2085764&amp;page=1&amp;authorid=1229473" rel="nofollow">只看该作者</a>
<span class="none"><img alt="回帖奖励" class="vm" src="../common_images/arw_r.gif"/></span>
<span class="pipe show">|</span><a class="show" href="forum.php?mod=viewthread&amp;tid=2085764&amp;extra=page%3D1&amp;ordertype=1" rel="nofollow">倒序浏览</a>
</div>
</div>
</div><div class="pct"><style type="text/css">.pcb{margin-right:0}</style><div class="pcb">
<div class="t_fsz">
<table cellpadding="0" cellspacing="0"><tr><td class="t_f" id="postmessage_54634955">
简单、好用，在不方便的登录各种账号的时候直接访问网页打开即用。<br/>
<ignore_js_op>
<img aid="2826397" class="zoom" id="aimg_2826397" inpost="1" src="../common_images/133931sndq03qv350nnlj3.png" width="1080"/>
<div class="tip tip_4 aimg_tip" disautofocus="true" id="aimg_2826397_menu" style="position: absolute; display: none">
<div class="xs0">
<p><strong>image.png</strong> <em class="xg1">(97.94 KB, 下载次数: 0)</em></p>
<p>
<a href="forum.php?mod=attachment&amp;aid=MjgyNjM5N3xmNDA2YmQ1YnwxNzY4MTQyOTE5fDU4ODI2OHwyMDg1NzY0&amp;nothumb=yes" target="_blank">下载附件</a>
</p>
<p class="xg1 y">2026-1-11 13:39 上传</p>
</div>
<div class="tip_horn"></div>
</div>
</ignore_js_op>
<br/>
支持在线聊天、在线传文件<br/>
<br/>
体验地址：<br/>
https://diuta.com/chuan3.html<br/>
html代码如下，保存就可以，大佬可以继续修复优化下。<br/>
<div style="padding:15px 0;"><div style="font-size:12px;">[Asm] <em class="viewsource" style="cursor:pointer;font-size:12px;color:#369 !important;">纯文本查看</em> <em class="copycode" style="cursor:pointer;font-size:12px;color:#369 !important;">复制代码</em></div><pre class="brush: asm; gutter: true">&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt;
    &lt;title&gt;宜省互传-轻松安全快速传文本、传文件 - chuan.diuta.com&lt;/title&gt;
    &lt;style&gt;
        /* 基础变量 - 支持深色/浅色模式 */
        :root {
            --primary: #6366f1;
            --primary-light: #a5b4fc;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            
            /* 浅色主题 */
            --bg-color: #f8fafc;
            --surface-color: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-tertiary: #94a3b8;
            --border-color: #e2e8f0;
            --border-light: #f1f5f9;
            --shadow-color: rgba(15, 23, 42, 0.1);
            
            --radius-sm: 8px;
            --radius: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            --shadow-xs: 0 1px 3px 0 var(--shadow-color);
            --shadow-sm: 0 2px 4px 0 var(--shadow-color);
            --shadow: 0 4px 8px 0 var(--shadow-color);
            --shadow-md: 0 6px 12px 0 var(--shadow-color);
            --shadow-lg: 0 10px 20px 0 var(--shadow-color);
            
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            
            --font-sans: 'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            --font-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Courier New', monospace;
        }

        /* 深色主题 */
        [url=home.php?mod=space&amp;uid=945662]@media[/url] (prefers-color-scheme: dark) {
            :root {
                --bg-color: #0f172a;
                --surface-color: #1e293b;
                --text-primary: #f1f5f9;
                --text-secondary: #cbd5e1;
                --text-tertiary: #94a3b8;
                --border-color: #334155;
                --border-light: #1e293b;
                --shadow-color: rgba(0, 0, 0, 0.3);
            }
        }

        /* 重置样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.5;
            font-weight: 400;
            overflow-x: hidden;
            transition: var(--transition-slow);
        }

        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }

        /* 应用容器 */
        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 769px) {
            .app-container {
                max-width: 1400px;
                margin: 0 auto;
                padding: 24px;
            }
        }

        /* 头部样式 */
        .app-header {
            padding: 24px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 24px;
            position: relative;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        @media (min-width: 769px) {
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }

        .app-title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: -0.025em;
        }

        .app-title i {
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .app-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 400;
            max-width: 600px;
        }

        /* 连接状态指示器 */
        .connection-status {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .connection-status:hover {
            box-shadow: var(--shadow);
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--danger);
            position: relative;
        }

        .status-dot.connected {
            background: var(--success);
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2);
        }

        .status-dot.connecting {
            background: var(--warning);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* 主内容区 */
        .main-content {
            flex: 1;
            padding: 0 16px 24px;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* PC端布局 */
        @media (min-width: 769px) {
            .main-content {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: auto auto;
                grid-template-areas: 
                    "connection chat"
                    "files transfers";
                gap: 24px;
                padding: 0 0 24px;
            }
            
            .connection-panel {
                grid-area: connection;
            }
            
            .chat-panel {
                grid-area: chat;
            }
            
            .file-panel {
                grid-area: files;
            }
            
            .transfer-panel {
                grid-area: transfers;
            }
        }

        /* 面板通用样式 */
        .panel {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: var(--transition-slow);
            position: relative;
            overflow: hidden;
        }

        .panel:hover {
            box-shadow: var(--shadow);
        }

        .panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .panel-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .panel-title i {
            color: var(--primary);
            font-size: 1.1rem;
        }

        .panel-actions {
            display: flex;
            gap: 8px;
        }

        .panel-content {
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* 连接管理面板 */
        .my-id-section {
            background: linear-gradient(135deg, var(--bg-color), var(--surface-color));
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 24px;
            border: 1px solid var(--border-color);
        }

        .my-id-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .my-id-value {
            font-family: var(--font-mono);
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary);
            word-break: break-all;
            padding: 16px;
            background: var(--bg-color);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
            margin-bottom: 16px;
            line-height: 1.4;
        }

        /* 连接表单 */
        .connect-form {
            margin-top: 16px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 1rem;
            font-family: var(--font-sans);
            transition: var(--transition);
            background: var(--surface-color);
            color: var(--text-primary);
        }

        .form-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* 已连接设备列表 */
        .connected-devices {
            margin-top: 24px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .devices-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .devices-list {
            flex: 1;
            overflow-y: auto;
            max-height: 300px;
            background: var(--bg-color);
            border-radius: var(--radius);
            padding: 16px;
            border: 1px solid var(--border-color);
        }

        .device-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: var(--surface-color);
            border-radius: var(--radius-sm);
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .device-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-xs);
        }

        .device-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .device-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .device-details {
            flex: 1;
        }

        .device-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .device-id {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-family: var(--font-mono);
        }

        .device-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
        }

        .status-indicator.disconnected {
            background: var(--danger);
        }

        /* 聊天面板 */
        .chat-panel {
            display: flex;
            flex-direction: column;
            min-height: 500px;
        }

        @media (max-width: 768px) {
            .chat-panel {
                min-height: 400px;
            }
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: var(--bg-color);
            border-radius: var(--radius);
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            max-width: 85%;
            animation: messageIn 0.3s ease;
        }

        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.received {
            align-self: flex-start;
        }

        .message.sent {
            align-self: flex-end;
        }

        .message-bubble {
            padding: 14px 18px;
            border-radius: 18px;
            position: relative;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .message.received .message-bubble {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-bottom-left-radius: 6px;
        }

        .message.sent .message-bubble {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-bottom-right-radius: 6px;
        }

        .message-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 6px;
            font-size: 0.8rem;
            opacity: 0.7;
        }

        .message-sender {
            font-weight: 500;
        }

        .chat-input-area {
            display: flex;
            gap: 12px;
            flex-shrink: 0;
        }

        .chat-input {
            flex: 1;
            padding: 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 1rem;
            resize: none;
            height: 60px;
            font-family: var(--font-sans);
            transition: var(--transition);
            background: var(--surface-color);
            color: var(--text-primary);
        }

        .chat-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* 文件传输面板 */
        .file-drop-zone {
            border: 2px dashed var(--border-color);
            border-radius: var(--radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: var(--surface-color);
            margin-bottom: 24px;
            position: relative;
            overflow: hidden;
        }

        .file-drop-zone:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }

        .file-drop-zone.dragover {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--primary);
            transform: scale(1.02);
        }

        .file-drop-zone-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 16px;
            opacity: 0.8;
        }

        .file-input {
            display: none;
        }

        .files-list {
            flex: 1;
            overflow-y: auto;
            max-height: 300px;
        }

        .file-item {
            background: var(--surface-color);
            padding: 16px;
            border-radius: var(--radius-sm);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 16px;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .file-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-xs);
        }

        .file-icon {
            font-size: 1.8rem;
            color: var(--primary);
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-color);
            border-radius: 12px;
        }

        .file-info {
            flex: 1;
            min-width: 0;
        }

        .file-name {
            font-weight: 600;
            margin-bottom: 6px;
            word-break: break-all;
        }

        .file-details {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .file-progress {
            width: 100%;
            height: 6px;
            background: var(--bg-color);
            border-radius: 3px;
            margin-top: 12px;
            overflow: hidden;
        }

        .file-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--primary));
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        /* 传输列表面板 */
        .transfers-list {
            flex: 1;
            overflow-y: auto;
            max-height: 400px;
        }

        .transfer-item {
            background: var(--surface-color);
            padding: 16px;
            border-radius: var(--radius-sm);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 16px;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .transfer-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-xs);
        }

        .transfer-icon {
            font-size: 1.8rem;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
        }

        .transfer-icon.sending {
            color: var(--warning);
            background: rgba(245, 158, 11, 0.1);
        }

        .transfer-icon.receiving {
            color: var(--info);
            background: rgba(59, 130, 246, 0.1);
        }

        .transfer-icon.completed {
            color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }

        .transfer-info {
            flex: 1;
            min-width: 0;
        }

        .transfer-name {
            font-weight: 600;
            margin-bottom: 6px;
            word-break: break-all;
        }

        .transfer-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 12px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .transfer-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .transfer-status.sending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .transfer-status.receiving {
            background: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        .transfer-status.completed {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .transfer-status.failed {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .transfer-progress {
            width: 100%;
            height: 6px;
            background: var(--bg-color);
            border-radius: 3px;
            margin-top: 12px;
            overflow: hidden;
        }

        .transfer-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--primary));
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        /* 按钮样式 */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius);
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            white-space: nowrap;
            font-family: var(--font-sans);
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .btn:active::after {
            animation: ripple 0.6s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #34d399);
            color: white;
            border: none;
        }

        .btn-success:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px -1px rgba(16, 185, 129, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--border-color);
        }

        .btn-outline:hover:not(:disabled) {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-lg {
            padding: 16px 32px;
            font-size: 1.1rem;
        }

        .btn-block {
            width: 100%;
        }

        .btn-icon {
            padding: 10px;
            border-radius: 50%;
            width: 44px;
            height: 44px;
        }

        .btn-icon-sm {
            padding: 8px;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            font-size: 0.9rem;
        }

        /* 移动端底部导航 */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--surface-color);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -2px 20px var(--shadow-color);
            z-index: 1000;
            border-top: 1px solid var(--border-color);
            display: none;
        }

        @media (max-width: 768px) {
            .mobile-nav {
                display: flex;
            }
            
            .main-content {
                padding-bottom: 80px;
            }
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
            padding: 8px 0;
            flex: 1;
            border-radius: 8px;
            margin: 0 4px;
        }

        .nav-item.active {
            color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .nav-item i {
            font-size: 1.4rem;
        }

        /* 通知系统 */
        .notifications {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 2000;
            max-width: 400px;
            width: 100%;
        }

        .notification {
            background: var(--surface-color);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: flex-start;
            gap: 12px;
            animation: slideIn 0.3s ease;
            border-left: 4px solid var(--primary);
            position: relative;
            overflow: hidden;
            transform-origin: top right;
            border: 1px solid var(--border-color);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification.success {
            border-left-color: var(--success);
        }

        .notification.error {
            border-left-color: var(--danger);
        }

        .notification.warning {
            border-left-color: var(--warning);
        }

        .notification.info {
            border-left-color: var(--info);
        }

        .notification-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 0.95rem;
        }

        .notification-message {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .notification-close {
            background: none;
            border: none;
            color: var(--text-tertiary);
            cursor: pointer;
            font-size: 1.1rem;
            padding: 4px;
            border-radius: 50%;
            transition: var(--transition);
            flex-shrink: 0;
        }

        .notification-close:hover {
            background: var(--bg-color);
            color: var(--text-primary);
        }

        /* 二维码弹窗模态框 - 重新设计 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 23, 42, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-slow);
            backdrop-filter: blur(8px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-container {
            background: var(--surface-color);
            border-radius: var(--radius-xl);
            padding: 0;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            position: relative;
            transform: translateY(20px) scale(0.95);
            transition: transform 0.3s ease;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border-color);
        }

        .modal-overlay.active .modal-container {
            transform: translateY(0) scale(1);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 24px 32px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.8rem;
            color: var(--text-tertiary);
            cursor: pointer;
            padding: 4px;
            border-radius: 50%;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: var(--bg-color);
            color: var(--text-primary);
        }

        /* 二维码弹窗内容 */
        .qr-modal-content {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .qr-tabs {
            display: flex;
            background: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
        }

        .qr-tab {
            flex: 1;
            padding: 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .qr-tab:hover {
            background: rgba(99, 102, 241, 0.05);
            color: var(--primary);
        }

        .qr-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
        }

        .qr-tab i {
            font-size: 1.5rem;
        }

        .qr-tab-content {
            display: none;
            padding: 32px;
            flex: 1;
            overflow-y: auto;
        }

        .qr-tab-content.active {
            display: block;
        }

        /* 生成二维码选项卡 */
        .qr-generate-container {
            text-align: center;
        }

        .qr-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .qr-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .qr-subtitle {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
            max-width: 500px;
            margin: 0 auto;
        }

        .qr-code-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 24px;
            margin: 32px 0;
        }

        .qr-display {
            background: white;
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            display: inline-block;
        }

        .qr-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 24px;
        }

        .qr-share-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 24px;
            text-align: left;
        }

        .qr-share-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .qr-share-option:hover {
            background: var(--bg-color);
            border-color: var(--primary);
        }

        .qr-share-option i {
            font-size: 1.2rem;
            color: var(--primary);
        }

        .qr-share-option div {
            flex: 1;
        }

        .qr-share-option h4 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .qr-share-option p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* 扫描二维码选项卡 */
        .qr-scan-container {
            text-align: center;
        }

        .scan-preview-container {
            width: 100%;
            height: 300px;
            background: var(--bg-color);
            border-radius: var(--radius);
            margin: 0 auto 24px;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .scan-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .scan-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 23, 42, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scan-frame {
            width: 200px;
            height: 200px;
            border: 2px solid var(--primary);
            border-radius: var(--radius);
            position: relative;
            box-shadow: 0 0 0 1000px rgba(0, 0, 0, 0.5);
        }

        .scan-frame::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary);
            border-radius: 4px;
            animation: scanLine 2s infinite linear;
        }

        @keyframes scanLine {
            0% {
                top: 0;
            }
            100% {
                top: 100%;
            }
        }

        .scan-frame::after {
            content: '请将二维码放入框内';
            position: absolute;
            bottom: -40px;
            left: 0;
            right: 0;
            text-align: center;
            color: white;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .scan-controls {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 24px;
        }

        .scan-message {
            margin-top: 16px;
            padding: 12px 16px;
            background: rgba(99, 102, 241, 0.1);
            border-radius: var(--radius);
            color: var(--primary);
            font-size: 0.9rem;
            display: none;
            border: 1px solid rgba(99, 102, 241, 0.2);
        }

        .scan-message.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .manual-input-section {
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
        }

        /* 移动端选项卡内容 */
        .mobile-tabs {
            display: none;
        }

        @media (max-width: 768px) {
            .mobile-tabs {
                display: block;
            }
            
            .desktop-layout {
                display: none;
            }
            
            .mobile-tab-content {
                display: none;
            }
            
            .mobile-tab-content.active {
                display: block;
            }
        }

        /* 空状态 */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-tertiary);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .empty-state p {
            margin-bottom: 8px;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        /* 文件操作按钮组 */
        .file-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        /* 传输统计 */
        .transfer-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .app-header {
                padding: 16px 16px 24px;
            }
            
            .app-title {
                font-size: 1.5rem;
            }
            
            .main-content {
                padding: 0 16px 24px;
                gap: 20px;
            }
            
            .panel {
                padding: 20px;
            }
            
            .panel-title {
                font-size: 1.1rem;
            }
            
            .modal-container {
                margin: 0 16px;
            }
            
            .qr-tab-content {
                padding: 24px;
            }
            
            .scan-preview-container {
                height: 250px;
            }
            
            .scan-frame {
                width: 180px;
                height: 180px;
            }
        }

        /* 加载动画 */
        .loader {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 工具类 */
        .text-center { text-align: center; }
        .mt-1 { margin-top: 4px; }
        .mt-2 { margin-top: 8px; }
        .mt-3 { margin-top: 12px; }
        .mt-4 { margin-top: 16px; }
        .mt-5 { margin-top: 20px; }
        .mb-1 { margin-bottom: 4px; }
        .mb-2 { margin-bottom: 8px; }
        .mb-3 { margin-bottom: 12px; }
        .mb-4 { margin-bottom: 16px; }
        .mb-5 { margin-bottom: 20px; }
        .d-flex { display: flex; }
        .align-items-center { align-items: center; }
        .justify-content-center { justify-content: center; }
        .justify-content-between { justify-content: space-between; }
        .flex-column { flex-direction: column; }
        .gap-1 { gap: 4px; }
        .gap-2 { gap: 8px; }
        .gap-3 { gap: 12px; }
        .gap-4 { gap: 16px; }
        .gap-5 { gap: 20px; }
        .w-100 { width: 100%; }
        .h-100 { height: 100%; }
    &lt;/style&gt;
    &lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"&gt;
    &lt;link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="app-container"&gt;
        &lt;!-- 头部 --&gt;
        &lt;header class="app-header"&gt;
            &lt;div class="header-content"&gt;
                &lt;div&gt;
                    &lt;h1 class="app-title"&gt;
                        &lt;i class="fas fa-bolt"&gt;&lt;/i&gt;
                        宜省互传
                    &lt;/h1&gt;
                    &lt;p class="app-subtitle"&gt;轻松安全快速传文本、传文件&lt;/p&gt;
                &lt;/div&gt;
                &lt;div class="connection-status"&gt;
                    &lt;div class="status-dot" id="status-dot"&gt;&lt;/div&gt;
                    &lt;span id="status-text"&gt;正在连接...&lt;/span&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/header&gt;

        &lt;!-- 移动端导航 --&gt;
        &lt;nav class="mobile-nav"&gt;
            &lt;button class="nav-item active" data-tab="connection"&gt;
                &lt;i class="fas fa-link"&gt;&lt;/i&gt;
                &lt;span&gt;连接&lt;/span&gt;
            &lt;/button&gt;
            &lt;button class="nav-item" data-tab="chat"&gt;
                &lt;i class="fas fa-comments"&gt;&lt;/i&gt;
                &lt;span&gt;聊天&lt;/span&gt;
            &lt;/button&gt;
            &lt;button class="nav-item" data-tab="files"&gt;
                &lt;i class="fas fa-file-import"&gt;&lt;/i&gt;
                &lt;span&gt;文件&lt;/span&gt;
            &lt;/button&gt;
            &lt;button class="nav-item" data-tab="transfers"&gt;
                &lt;i class="fas fa-exchange-alt"&gt;&lt;/i&gt;
                &lt;span&gt;传输&lt;/span&gt;
            &lt;/button&gt;
        &lt;/nav&gt;

        &lt;!-- 主内容区 --&gt;
        &lt;main class="main-content"&gt;
            &lt;!-- 连接管理 (桌面版) --&gt;
            &lt;section class="panel connection-panel desktop-layout"&gt;
                &lt;div class="panel-header"&gt;
                    &lt;h2 class="panel-title"&gt;
                        &lt;i class="fas fa-link"&gt;&lt;/i&gt;
                        连接管理
                    &lt;/h2&gt;
                    &lt;div class="panel-actions"&gt;
                        &lt;!-- 二维码入口按钮 --&gt;
                        &lt;button class="btn btn-icon-sm btn-outline" id="qr-modal-btn" title="二维码连接"&gt;
                            &lt;i class="fas fa-qrcode"&gt;&lt;/i&gt;
                        &lt;/button&gt;
                        &lt;button class="btn btn-sm btn-primary" id="copy-btn"&gt;
                            &lt;i class="far fa-copy"&gt;&lt;/i&gt; 复制ID
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="panel-content"&gt;
                    &lt;div class="my-id-section"&gt;
                        &lt;div class="my-id-label"&gt;
                            &lt;i class="fas fa-id-card"&gt;&lt;/i&gt; 我的设备ID
                        &lt;/div&gt;
                        &lt;div class="my-id-value" id="my-id"&gt;正在生成设备ID...&lt;/div&gt;
                    &lt;/div&gt;
                    
                    &lt;!-- 移除了connection-tools部分 --&gt;
                    
                    &lt;div class="connect-form"&gt;
                        &lt;div class="form-group"&gt;
                            &lt;label class="form-label"&gt;手动连接其他设备&lt;/label&gt;
                            &lt;div class="d-flex gap-2"&gt;
                                &lt;input type="text" 
                                       class="form-input" 
                                       id="peer-id-input" 
                                       placeholder="输入对方设备ID"
                                       autocomplete="off"&gt;
                                &lt;button class="btn btn-primary btn-icon" id="connect-btn" title="连接"&gt;
                                    &lt;i class="fas fa-plug"&gt;&lt;/i&gt;
                                &lt;/button&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    
                    &lt;div class="connected-devices"&gt;
                        &lt;div class="devices-title"&gt;
                            &lt;i class="fas fa-users"&gt;&lt;/i&gt; 已连接设备 (&lt;span id="connected-count"&gt;0&lt;/span&gt;)
                        &lt;/div&gt;
                        &lt;div class="devices-list" id="devices-list"&gt;
                            &lt;div class="empty-state"&gt;
                                &lt;i class="fas fa-user-friends"&gt;&lt;/i&gt;
                                &lt;h4&gt;暂无已连接的设备&lt;/h4&gt;
                                &lt;p&gt;连接其他设备后，可以开始聊天和传输文件&lt;/p&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/section&gt;

            &lt;!-- 聊天面板 (桌面版) --&gt;
            &lt;section class="panel chat-panel desktop-layout"&gt;
                &lt;div class="panel-header"&gt;
                    &lt;h2 class="panel-title"&gt;
                        &lt;i class="fas fa-comments"&gt;&lt;/i&gt;
                        实时聊天
                    &lt;/h2&gt;
                    &lt;div class="panel-actions"&gt;
                        &lt;span class="chat-count" id="chat-count"&gt;0 条消息&lt;/span&gt;
                        &lt;button class="btn btn-sm btn-outline"&gt;
                            &lt;i class="fas fa-trash"&gt;&lt;/i&gt; 清空
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="panel-content"&gt;
                    &lt;div class="chat-messages" id="chat-messages"&gt;
                        &lt;div class="empty-state"&gt;
                            &lt;i class="fas fa-comment-dots"&gt;&lt;/i&gt;
                            &lt;h4&gt;暂无聊天消息&lt;/h4&gt;
                            &lt;p&gt;连接设备后即可开始聊天&lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class="chat-input-area"&gt;
                        &lt;textarea class="chat-input" 
                                  id="chat-input" 
                                  placeholder="输入消息...按Enter发送，Shift+Enter换行"
                                  rows="2"&gt;&lt;/textarea&gt;
                        &lt;button class="btn btn-primary btn-icon" id="send-chat-btn"&gt;
                            &lt;i class="fas fa-paper-plane"&gt;&lt;/i&gt;
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/section&gt;

            &lt;!-- 文件传输面板 (桌面版) --&gt;
            &lt;section class="panel file-panel desktop-layout"&gt;
                &lt;div class="panel-header"&gt;
                    &lt;h2 class="panel-title"&gt;
                        &lt;i class="fas fa-file-import"&gt;&lt;/i&gt;
                        文件传输
                    &lt;/h2&gt;
                    &lt;div class="panel-actions"&gt;
                        &lt;button class="btn btn-sm btn-outline"&gt;
                            &lt;i class="fas fa-trash"&gt;&lt;/i&gt; 清空
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="panel-content"&gt;
                    &lt;div class="file-drop-zone" id="drop-zone"&gt;
                        &lt;div class="file-drop-zone-icon"&gt;
                            &lt;i class="fas fa-cloud-upload-alt"&gt;&lt;/i&gt;
                        &lt;/div&gt;
                        &lt;h3&gt;拖放文件到此处&lt;/h3&gt;
                        &lt;p&gt;或点击选择文件，支持多选&lt;/p&gt;
                        &lt;input type="file" class="file-input" id="file-input" multiple&gt;
                        &lt;p class="qr-instruction"&gt;最大支持2GB文件&lt;/p&gt;
                    &lt;/div&gt;
                    
                    &lt;div class="files-list" id="files-list"&gt;
                        &lt;div class="empty-state"&gt;
                            &lt;i class="fas fa-file-import"&gt;&lt;/i&gt;
                            &lt;h4&gt;暂无待传输文件&lt;/h4&gt;
                            &lt;p&gt;添加文件并发送给已连接的设备&lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    
                    &lt;div class="file-actions"&gt;
                        &lt;div class="form-group w-100 mb-0"&gt;
                            &lt;select class="form-input" id="send-to-select"&gt;
                                &lt;option value="all"&gt;发送给所有设备&lt;/option&gt;
                            &lt;/select&gt;
                        &lt;/div&gt;
                        &lt;button class="btn btn-success" id="send-files-btn" disabled&gt;
                            &lt;i class="fas fa-paper-plane"&gt;&lt;/i&gt; 发送文件
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/section&gt;

            &lt;!-- 传输列表面板 (桌面版) --&gt;
            &lt;section class="panel transfer-panel desktop-layout"&gt;
                &lt;div class="panel-header"&gt;
                    &lt;h2 class="panel-title"&gt;
                        &lt;i class="fas fa-exchange-alt"&gt;&lt;/i&gt;
                        传输列表
                    &lt;/h2&gt;
                    &lt;div class="panel-actions"&gt;
                        &lt;button class="btn btn-sm btn-outline"&gt;
                            &lt;i class="fas fa-sync-alt"&gt;&lt;/i&gt; 刷新
                        &lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class="panel-content"&gt;
                    &lt;div class="transfers-list" id="transfers-list"&gt;
                        &lt;div class="empty-state"&gt;
                            &lt;i class="fas fa-exchange-alt"&gt;&lt;/i&gt;
                            &lt;h4&gt;暂无传输任务&lt;/h4&gt;
                            &lt;p&gt;文件传输将在此显示进度&lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class="transfer-stats"&gt;
                        &lt;div&gt;正在传输: &lt;span id="active-transfers"&gt;0&lt;/span&gt;&lt;/div&gt;
                        &lt;div&gt;已完成: &lt;span id="completed-transfers"&gt;0&lt;/span&gt;&lt;/div&gt;
                        &lt;div&gt;失败: &lt;span id="failed-transfers"&gt;0&lt;/span&gt;&lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/section&gt;

            &lt;!-- 移动端选项卡内容 --&gt;
            &lt;div class="mobile-tabs"&gt;
                &lt;!-- 连接选项卡 --&gt;
                &lt;section class="panel mobile-tab-content active" id="mobile-connection"&gt;
                    &lt;div class="panel-content"&gt;
                        &lt;div class="my-id-section"&gt;
                            &lt;div class="my-id-label"&gt;
                                &lt;i class="fas fa-id-card"&gt;&lt;/i&gt; 我的设备ID
                            &lt;/div&gt;
                            &lt;div class="my-id-value" id="mobile-my-id"&gt;正在生成设备ID...&lt;/div&gt;
                        &lt;/div&gt;
                        
                        &lt;!-- 移动端二维码按钮 --&gt;
                        &lt;div style="margin-bottom: 24px;"&gt;
                            &lt;button class="btn btn-outline btn-block"&gt;
                                &lt;i class="fas fa-qrcode"&gt;&lt;/i&gt; 二维码连接
                            &lt;/button&gt;
                        &lt;/div&gt;
                        
                        &lt;div class="connect-form"&gt;
                            &lt;div class="form-group"&gt;
                                &lt;label class="form-label"&gt;手动连接其他设备&lt;/label&gt;
                                &lt;div class="d-flex gap-2"&gt;
                                    &lt;input type="text" 
                                           class="form-input" 
                                           id="mobile-peer-id-input" 
                                           placeholder="输入对方设备ID"
                                           autocomplete="off"&gt;
                                    &lt;button class="btn btn-primary btn-icon" id="mobile-connect-btn" title="连接"&gt;
                                        &lt;i class="fas fa-plug"&gt;&lt;/i&gt;
                                    &lt;/button&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        
                        &lt;div class="connected-devices"&gt;
                            &lt;div class="devices-title"&gt;
                                &lt;i class="fas fa-users"&gt;&lt;/i&gt; 已连接设备 (&lt;span id="mobile-connected-count"&gt;0&lt;/span&gt;)
                            &lt;/div&gt;
                            &lt;div class="devices-list" id="mobile-devices-list"&gt;
                                &lt;div class="empty-state"&gt;
                                    &lt;i class="fas fa-user-friends"&gt;&lt;/i&gt;
                                    &lt;h4&gt;暂无已连接的设备&lt;/h4&gt;
                                    &lt;p&gt;连接其他设备后，可以开始聊天和传输文件&lt;/p&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/section&gt;

                &lt;!-- 聊天选项卡 --&gt;
                &lt;section class="panel mobile-tab-content" id="mobile-chat"&gt;
                    &lt;div class="panel-content" style="height: 100%; display: flex; flex-direction: column;"&gt;
                        &lt;div class="chat-messages" id="mobile-chat-messages" style="flex: 1;"&gt;
                            &lt;div class="empty-state"&gt;
                                &lt;i class="fas fa-comment-dots"&gt;&lt;/i&gt;
                                &lt;h4&gt;暂无聊天消息&lt;/h4&gt;
                                &lt;p&gt;连接设备后即可开始聊天&lt;/p&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="chat-input-area"&gt;
                            &lt;textarea class="chat-input" 
                                      id="mobile-chat-input" 
                                      placeholder="输入消息..."
                                      rows="2"&gt;&lt;/textarea&gt;
                            &lt;button class="btn btn-primary btn-icon" id="mobile-send-chat-btn"&gt;
                                &lt;i class="fas fa-paper-plane"&gt;&lt;/i&gt;
                            &lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/section&gt;

                &lt;!-- 文件选项卡 --&gt;
                &lt;section class="panel mobile-tab-content" id="mobile-files"&gt;
                    &lt;div class="panel-content"&gt;
                        &lt;div class="file-drop-zone" id="mobile-drop-zone"&gt;
                            &lt;div class="file-drop-zone-icon"&gt;
                                &lt;i class="fas fa-cloud-upload-alt"&gt;&lt;/i&gt;
                            &lt;/div&gt;
                            &lt;h3&gt;选择文件&lt;/h3&gt;
                            &lt;p&gt;点击上传文件，支持多选&lt;/p&gt;
                            &lt;input type="file" class="file-input" id="mobile-file-input" multiple&gt;
                            &lt;p class="qr-instruction"&gt;最大支持2GB文件&lt;/p&gt;
                        &lt;/div&gt;
                        
                        &lt;div class="files-list" id="mobile-files-list"&gt;
                            &lt;div class="empty-state"&gt;
                                &lt;i class="fas fa-file-import"&gt;&lt;/i&gt;
                                &lt;h4&gt;暂无待传输文件&lt;/h4&gt;
                                &lt;p&gt;添加文件并发送给已连接的设备&lt;/p&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        
                        &lt;div class="file-actions"&gt;
                            &lt;div class="form-group w-100 mb-0"&gt;
                                &lt;select class="form-input" id="mobile-send-to-select"&gt;
                                    &lt;option value="all"&gt;发送给所有设备&lt;/option&gt;
                                &lt;/select&gt;
                            &lt;/div&gt;
                            &lt;button class="btn btn-success btn-block" id="mobile-send-files-btn" disabled&gt;
                                &lt;i class="fas fa-paper-plane"&gt;&lt;/i&gt; 发送文件
                            &lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/section&gt;

                &lt;!-- 传输列表选项卡 --&gt;
                &lt;section class="panel mobile-tab-content" id="mobile-transfers"&gt;
                    &lt;div class="panel-content"&gt;
                        &lt;div class="transfers-list" id="mobile-transfers-list" style="flex: 1;"&gt;
                            &lt;div class="empty-state"&gt;
                                &lt;i class="fas fa-exchange-alt"&gt;&lt;/i&gt;
                                &lt;h4&gt;暂无传输任务&lt;/h4&gt;
                                &lt;p&gt;文件传输将在此显示进度&lt;/p&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="transfer-stats"&gt;
                            &lt;div&gt;正在传输: &lt;span id="mobile-active-transfers"&gt;0&lt;/span&gt;&lt;/div&gt;
                            &lt;div&gt;已完成: &lt;span id="mobile-completed-transfers"&gt;0&lt;/span&gt;&lt;/div&gt;
                            &lt;div&gt;失败: &lt;span id="mobile-failed-transfers"&gt;0&lt;/span&gt;&lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/section&gt;
            &lt;/div&gt;
        &lt;/main&gt;
    &lt;/div&gt;

    &lt;!-- 通知区域 --&gt;
    &lt;div class="notifications" id="notifications"&gt;&lt;/div&gt;

    &lt;!-- 二维码连接弹窗 --&gt;
    &lt;div class="modal-overlay" id="qr-connect-modal"&gt;
        &lt;div class="modal-container"&gt;
            &lt;div class="modal-header"&gt;
                &lt;div class="modal-title"&gt;
                    &lt;i class="fas fa-qrcode"&gt;&lt;/i&gt; 二维码连接
                &lt;/div&gt;
                &lt;button class="modal-close"&gt;×&lt;/button&gt;
            &lt;/div&gt;
            &lt;div class="qr-modal-content"&gt;
                &lt;div class="qr-tabs"&gt;
                    &lt;button class="qr-tab active"&gt;
                        &lt;i class="fas fa-qrcode"&gt;&lt;/i&gt;
                        &lt;span&gt;生成二维码&lt;/span&gt;
                    &lt;/button&gt;
                    &lt;button class="qr-tab"&gt;
                        &lt;i class="fas fa-camera"&gt;&lt;/i&gt;
                        &lt;span&gt;扫描二维码&lt;/span&gt;
                    &lt;/button&gt;
                &lt;/div&gt;
                
                &lt;!-- 生成二维码选项卡 --&gt;
                &lt;div class="qr-tab-content active" id="generate-tab"&gt;
                    &lt;div class="qr-generate-container"&gt;
                        &lt;div class="qr-header"&gt;
                            &lt;h3 class="qr-title"&gt;我的连接二维码&lt;/h3&gt;
                            &lt;p class="qr-subtitle"&gt;使用另一台设备扫描此二维码即可快速连接到您的设备&lt;/p&gt;
                        &lt;/div&gt;
                        &lt;div class="qr-code-container"&gt;
                            &lt;div class="qr-display" id="qrcode"&gt;&lt;/div&gt;
                            &lt;div class="my-id-value" style="margin: 0 auto; max-width: 300px;" id="qr-my-id"&gt;&lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="qr-actions"&gt;
                            &lt;button class="btn btn-outline"&gt;
                                &lt;i class="far fa-copy"&gt;&lt;/i&gt; 复制设备ID
                            &lt;/button&gt;
                            &lt;button class="btn btn-primary"&gt;
                                &lt;i class="fas fa-download"&gt;&lt;/i&gt; 保存二维码
                            &lt;/button&gt;
                        &lt;/div&gt;
                        &lt;div class="qr-share-options"&gt;
                            &lt;div class="qr-share-option"&gt;
                                &lt;i class="fas fa-share-alt"&gt;&lt;/i&gt;
                                &lt;div&gt;
                                    &lt;h4&gt;分享连接&lt;/h4&gt;
                                    &lt;p&gt;复制连接信息到剪贴板&lt;/p&gt;
                                &lt;/div&gt;
                                &lt;i class="fas fa-chevron-right"&gt;&lt;/i&gt;
                            &lt;/div&gt;
                            &lt;div class="qr-share-option"&gt;
                                &lt;i class="fas fa-info-circle"&gt;&lt;/i&gt;
                                &lt;div&gt;
                                    &lt;h4&gt;连接说明&lt;/h4&gt;
                                    &lt;p&gt;查看二维码连接详细步骤&lt;/p&gt;
                                &lt;/div&gt;
                                &lt;i class="fas fa-chevron-right"&gt;&lt;/i&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                
                &lt;!-- 扫描二维码选项卡 --&gt;
                &lt;div class="qr-tab-content" id="scan-tab"&gt;
                    &lt;div class="qr-scan-container"&gt;
                        &lt;div class="scan-preview-container"&gt;
                            &lt;video class="scan-preview" id="scan-video" autoplay playsinline&gt;&lt;/video&gt;
                            &lt;div class="scan-overlay"&gt;
                                &lt;div class="scan-frame"&gt;&lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="scan-message" id="scan-message"&gt;
                            正在扫描二维码...
                        &lt;/div&gt;
                        &lt;div class="scan-controls"&gt;
                            &lt;button class="btn btn-outline" id="switch-camera-btn"&gt;
                                &lt;i class="fas fa-sync-alt"&gt;&lt;/i&gt; 切换摄像头
                            &lt;/button&gt;
                            &lt;button class="btn btn-primary" id="stop-scan-btn"&gt;
                                &lt;i class="fas fa-stop"&gt;&lt;/i&gt; 停止扫描
                            &lt;/button&gt;
                        &lt;/div&gt;
                        &lt;div class="manual-input-section"&gt;
                            &lt;p class="qr-subtitle" style="text-align: left; margin-bottom: 12px;"&gt;或者手动输入二维码内容：&lt;/p&gt;
                            &lt;div class="d-flex gap-2"&gt;
                                &lt;input type="text" 
                                       class="form-input" 
                                       id="manual-qr-input" 
                                       placeholder="粘贴二维码内容..."
                                       style="flex: 1;"&gt;
                                &lt;button class="btn btn-outline"&gt;
                                    &lt;i class="fas fa-plug"&gt;&lt;/i&gt; 连接
                                &lt;/button&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;!-- 引入PeerJS库 --&gt;
    &lt;script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"&gt;&lt;/script&gt;
    &lt;!-- 引入二维码生成库 --&gt;
    &lt;script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"&gt;&lt;/script&gt;
    &lt;!-- 引入二维码扫描库 --&gt;
    &lt;script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.min.js"&gt;&lt;/script&gt;

    &lt;script&gt;
        // 全局变量
        let peer = null;
        let myPeerId = null;
        let connections = new Map(); // peerId -&gt; connection
        let chatMessages = [];
        let selectedFiles = [];
        let transfers = new Map(); // transferId -&gt; transfer info
        let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // 二维码弹窗相关变量
        let scanVideo = null;
        let scanCanvas = null;
        let scanContext = null;
        let scanStream = null;
        let scanAnimation = null;
        let currentFacingMode = 'environment'; // 默认后置摄像头
        let isScanning = false;

        // 初始化
        document.addEventListener('DOMContentLoaded', () =&gt; {
            initApp();
            setupEventListeners();
        });

        // 初始化应用
        function initApp() {
            // 生成或获取设备ID
            let deviceId = localStorage.getItem('deviceId');
            if (!deviceId) {
                deviceId = generateDeviceId();
                localStorage.setItem('deviceId', deviceId);
            }
            
            // 初始化PeerJS
            initializePeer(deviceId);
            
            // 更新UI
            updateMyIdDisplay();
            updateStatus('正在连接服务器...', 'connecting');
            
            // 如果是移动端，设置移动端特定逻辑
            if (isMobile) {
                setupMobileFeatures();
            }
            
            // 初始化传输统计
            updateTransferStats();
            
            // 初始化聊天统计
            updateChatStats();
            
            // 添加网络状态监听
            window.addEventListener('online', () =&gt; {
                showNotification('网络已恢复', 'success', '网络状态');
                if (peer &amp;&amp; peer.disconnected) {
                    setTimeout(() =&gt; {
                        if (peer &amp;&amp; !peer.destroyed) {
                            peer.reconnect();
                        }
                    }, 1000);
                }
            });
            
            window.addEventListener('offline', () =&gt; {
                showNotification('网络已断开', 'error', '网络状态');
                updateStatus('网络断开', 'disconnected');
            });
            
            // 页面卸载时清理资源
            window.addEventListener('beforeunload', cleanupResources);
        }

        // 初始化PeerJS
        function initializePeer(peerId) {
            // 使用更稳定的WebRTC配置
            const options = {
                host: '0.peerjs.com',
                port: 443,
                path: '/',
                secure: true,
                config: {
                    'iceServers': [
                        { 
                            urls: [
                                'stun:stun.l.google.com:19302',
                                'stun:stun1.l.google.com:19302',
                                'stun:global.stun.twilio.com:3478'
                            ]
                        },
                        {
                            urls: 'turn:openrelay.metered.ca:80',
                            username: 'openrelayproject',
                            credential: 'openrelayproject'
                        },
                        {
                            urls: 'turn:openrelay.metered.ca:443',
                            username: 'openrelayproject',
                            credential: 'openrelayproject'
                        },
                        {
                            urls: 'turn:openrelay.metered.ca:443?transport=tcp',
                            username: 'openrelayproject',
                            credential: 'openrelayproject'
                        }
                    ],
                    'iceCandidatePoolSize': 10,
                    'iceTransportPolicy': 'all'
                },
                debug: 1
            };
            
            try {
                // 如果存在旧的peer实例，先销毁
                if (peer &amp;&amp; !peer.destroyed) {
                    peer.destroy();
                }
                
                peer = new Peer(peerId, options);
                
                peer.on('open', (id) =&gt; {
                    console.log('PeerJS连接成功，ID:', id);
                    myPeerId = id;
                    updateMyIdDisplay();
                    updateStatus('已连接', 'connected');
                    showNotification('连接成功！可以开始连接其他设备', 'success', '连接成功');
                });
                
                peer.on('connection', (conn) =&gt; {
                    console.log('收到连接请求:', conn.peer);
                    handleNewConnection(conn);
                });
                
                peer.on('error', (err) =&gt; {
                    console.error('PeerJS错误:', err);
                    
                    let errorMsg = '连接错误';
                    let shouldReconnect = false;
                    
                    switch (err.type) {
                        case 'peer-unavailable':
                            errorMsg = '对方设备不可用或ID错误';
                            break;
                        case 'network':
                            errorMsg = '网络连接错误，请检查网络';
                            shouldReconnect = true;
                            break;
                        case 'server-error':
                            errorMsg = '服务器错误，尝试重新连接';
                            shouldReconnect = true;
                            break;
                        case 'disconnected':
                            errorMsg = '连接已断开';
                            shouldReconnect = true;
                            break;
                        case 'browser-incompatible':
                            errorMsg = '浏览器不兼容WebRTC，请使用Chrome/Firefox/Safari等现代浏览器';
                            break;
                        default:
                            errorMsg = err.message || `连接错误: ${err.type}`;
                    }
                    
                    updateStatus('连接错误', 'error');
                    showNotification(errorMsg, 'error', '连接错误');
                    
                    // 需要重连的情况
                    if (shouldReconnect &amp;&amp; peer &amp;&amp; peer.disconnected) {
                        setTimeout(() =&gt; {
                            if (peer &amp;&amp; !peer.destroyed) {
                                console.log('尝试重新连接...');
                                peer.reconnect();
                            }
                        }, 3000);
                    }
                });
                
                peer.on('disconnected', () =&gt; {
                    console.log('PeerJS连接断开');
                    updateStatus('连接断开', 'disconnected');
                    showNotification('连接断开，正在重新连接...', 'warning', '连接断开');
                    
                    // 尝试重新连接
                    setTimeout(() =&gt; {
                        if (peer &amp;&amp; !peer.destroyed) {
                            peer.reconnect();
                        }
                    }, 2000);
                });
                
                peer.on('close', () =&gt; {
                    console.log('PeerJS连接关闭');
                    updateStatus('连接已关闭', 'disconnected');
                });
                
            } catch (error) {
                console.error('初始化PeerJS失败:', error);
                showNotification('初始化连接失败: ' + error.message, 'error', '初始化失败');
                updateStatus('连接失败', 'error');
            }
        }

        // 处理新连接
        function handleNewConnection(conn) {
            console.log('处理新连接:', conn.peer);
            
            // 设置序列化选项
            conn.serialization = 'json';
            
            // 设置连接事件处理
            conn.on('open', () =&gt; {
                console.log('连接已建立:', conn.peer);
                
                // 添加到连接列表
                connections.set(conn.peer, conn);
                updateConnectedDevicesList();
                
                // 修复数据监听
                conn.on('data', (data) =&gt; {
                    try {
                        // 确保数据是对象
                        if (typeof data === 'string') {
                            data = JSON.parse(data);
                        }
                        handleIncomingData(data, conn.peer);
                    } catch (error) {
                        console.error('解析数据失败:', error);
                    }
                });
                
                // 连接关闭
                conn.on('close', () =&gt; {
                    console.log('连接关闭:', conn.peer);
                    connections.delete(conn.peer);
                    updateConnectedDevicesList();
                    showNotification(`设备 ${conn.peer} 已断开连接`, 'warning', '连接断开');
                });
                
                // 连接错误
                conn.on('error', (err) =&gt; {
                    console.error('连接错误:', err);
                    showNotification(`与 ${conn.peer} 的连接错误: ${err.message}`, 'error', '连接错误');
                });
                
                showNotification(`设备 ${conn.peer} 已连接`, 'success', '新连接');
                
                // 发送欢迎消息
                setTimeout(() =&gt; {
                    if (conn.open) {
                        const welcomeMsg = {
                            type: 'chat-message',
                            content: '连接成功！可以开始聊天和传输文件了。',
                            timestamp: Date.now(),
                            sender: myPeerId,
                            messageId: 'welcome_' + Date.now()
                        };
                        conn.send(JSON.stringify(welcomeMsg));
                    }
                }, 1000);
            });
            
            // 处理连接错误
            conn.on('error', (err) =&gt; {
                console.error('建立连接时出错:', err);
                showNotification(`连接 ${conn.peer} 失败: ${err.message}`, 'error', '连接失败');
            });
        }

        // 连接到其他设备
        function connectToPeer() {
            const peerId = document.getElementById('peer-id-input').value.trim();
            if (!peerId) {
                showNotification('请输入设备ID', 'error', '输入错误');
                return;
            }
            
            connectToPeerById(peerId);
        }

        function connectToPeerMobile() {
            const peerId = document.getElementById('mobile-peer-id-input').value.trim();
            if (!peerId) {
                showNotification('请输入设备ID', 'error', '输入错误');
                return;
            }
            
            connectToPeerById(peerId);
            document.getElementById('mobile-peer-id-input').value = '';
        }

        function connectToPeerById(peerId) {
            if (peerId === myPeerId) {
                showNotification('不能连接到自己', 'warning', '连接错误');
                return;
            }
            
            if (connections.has(peerId)) {
                showNotification('已连接到该设备', 'info', '连接状态');
                return;
            }
            
            showNotification(`正在连接设备 ${peerId}...`, 'info', '连接中');
            
            try {
                // 创建连接配置
                const conn = peer.connect(peerId, {
                    reliable: true,
                    serialization: 'json',
                    metadata: {
                        type: 'file-transfer',
                        timestamp: Date.now(),
                        version: '1.0'
                    }
                });
                
                if (!conn) {
                    showNotification('创建连接失败', 'error', '连接失败');
                    return;
                }
                
                // 设置连接事件
                conn.on('open', () =&gt; {
                    console.log('主动连接成功:', peerId);
                    connections.set(peerId, conn);
                    updateConnectedDevicesList();
                    
                    // 修复数据监听
                    conn.on('data', (data) =&gt; {
                        try {
                            if (typeof data === 'string') {
                                data = JSON.parse(data);
                            }
                            handleIncomingData(data, peerId);
                        } catch (error) {
                            console.error('解析数据失败:', error);
                        }
                    });
                    
                    conn.on('close', () =&gt; {
                        connections.delete(peerId);
                        updateConnectedDevicesList();
                        showNotification(`设备 ${peerId} 已断开连接`, 'warning', '连接断开');
                    });
                    
                    conn.on('error', (err) =&gt; {
                        console.error('连接错误:', err);
                        showNotification(`与 ${peerId} 的连接错误: ${err.message}`, 'error', '连接错误');
                    });
                    
                    showNotification(`成功连接设备 ${peerId}`, 'success', '连接成功');
                    
                    // 清空输入框
                    if (!isMobile) {
                        document.getElementById('peer-id-input').value = '';
                    }
                });
                
                conn.on('error', (err) =&gt; {
                    console.error('连接错误:', err);
                    showNotification(`连接失败: ${err.message}`, 'error', '连接失败');
                });
                
            } catch (error) {
                console.error('创建连接时异常:', error);
                showNotification(`连接失败: ${error.message}`, 'error', '连接失败');
            }
        }

        // 处理传入数据
        function handleIncomingData(data, fromPeer) {
            console.log('收到数据:', data.type, '来自:', fromPeer);
            
            try {
                switch (data.type) {
                    case 'chat-message':
                        handleChatMessage(data, fromPeer);
                        break;
                    case 'file-start':
                        handleFileStart(data, fromPeer);
                        break;
                    case 'file-chunk':
                        handleFileChunk(data, fromPeer);
                        break;
                    case 'file-end':
                        handleFileEnd(data, fromPeer);
                        break;
                    case 'file-error':
                        handleFileError(data, fromPeer);
                        break;
                    case 'ping':
                        // 心跳包，回复pong
                        const conn = connections.get(fromPeer);
                        if (conn &amp;&amp; conn.open) {
                            conn.send(JSON.stringify({ type: 'pong', timestamp: Date.now() }));
                        }
                        break;
                    default:
                        console.warn('未知数据类型:', data.type);
                }
            } catch (error) {
                console.error('处理数据时出错:', error);
                showNotification('处理数据时出错', 'error', '数据错误');
            }
        }

        // 处理聊天消息
        function handleChatMessage(data, fromPeer) {
            const message = {
                id: data.messageId || Date.now() + Math.random(),
                content: data.content,
                sender: fromPeer,
                timestamp: data.timestamp || Date.now(),
                type: 'received'
            };
            
            chatMessages.push(message);
            updateChatDisplay();
            updateChatStats();
            
            // 如果当前不在聊天标签页，显示通知
            if (isMobile &amp;&amp; !document.querySelector('[data-tab="chat"]').classList.contains('active')) {
                const shortContent = data.content.length &gt; 30 ? data.content.substring(0, 30) + '...' : data.content;
                showNotification(`新消息来自 ${fromPeer.substring(0, 8)}...: ${shortContent}`, 'info', '新消息');
            }
        }

        // 处理文件开始传输
        function handleFileStart(data, fromPeer) {
            const transferId = data.transferId;
            const fileId = data.fileId;
            
            console.log('开始接收文件:', data.fileName);
            
            // 创建传输记录
            const transferInfo = {
                id: transferId,
                fileId: fileId,
                name: data.fileName,
                size: data.fileSize,
                type: data.fileType,
                direction: 'receiving',
                peerId: fromPeer,
                status: 'receiving',
                progress: 0,
                chunks: [],
                totalChunks: data.totalChunks,
                receivedChunks: 0,
                startTime: Date.now(),
                chunksReceived: new Array(data.totalChunks).fill(false)
            };
            
            transfers.set(transferId, transferInfo);
            updateTransfersList();
            updateTransferStats();
            
            showNotification(`开始接收文件: ${data.fileName}`, 'info', '文件接收');
        }

        // 处理文件块
        function handleFileChunk(data, fromPeer) {
            const transferId = data.transferId;
            const transferInfo = transfers.get(transferId);
            
            if (!transferInfo) {
                console.error('找不到传输记录:', transferId);
                return;
            }
            
            // 标记块已接收
            transferInfo.chunksReceived[data.chunkIndex] = true;
            transferInfo.receivedChunks++;
            
            // 更新进度
            const progress = Math.round((transferInfo.receivedChunks / transferInfo.totalChunks) * 100);
            transferInfo.progress = progress;
            
            // 存储块数据
            transferInfo.chunks[data.chunkIndex] = data.data;
            
            // 更新传输列表显示
            updateTransferProgress(transferId, progress);
            
            // 如果收到所有块，组装文件
            if (transferInfo.receivedChunks === transferInfo.totalChunks) {
                assembleAndSaveFile(transferInfo);
            }
        }

        // 处理文件传输结束
        function handleFileEnd(data, fromPeer) {
            const transferId = data.transferId;
            const transferInfo = transfers.get(transferId);
            
            if (transferInfo) {
                transferInfo.status = 'completed';
                transferInfo.endTime = Date.now();
                transferInfo.progress = 100;
                
                updateTransfersList();
                updateTransferStats();
                
                showNotification(`文件 ${transferInfo.name} 接收完成`, 'success', '文件接收完成');
                
                // 发送确认
                const conn = connections.get(fromPeer);
                if (conn &amp;&amp; conn.open) {
                    conn.send(JSON.stringify({
                        type: 'file-ack',
                        transferId: transferId,
                        status: 'success'
                    }));
                }
            }
        }

        // 处理文件传输错误
        function handleFileError(data, fromPeer) {
            const transferId = data.transferId;
            const transferInfo = transfers.get(transferId);
            
            if (transferInfo) {
                transferInfo.status = 'failed';
                transferInfo.error = data.error;
                
                updateTransfersList();
                updateTransferStats();
                
                showNotification(`文件 ${transferInfo.name} 传输失败: ${data.error}`, 'error', '传输失败');
            }
        }

        // 组装并保存文件
        function assembleAndSaveFile(transferInfo) {
            try {
                console.log('开始组装文件:', transferInfo.name);
                
                // 按顺序组装块
                const sortedChunks = [];
                for (let i = 0; i &lt; transferInfo.totalChunks; i++) {
                    if (transferInfo.chunks[i]) {
                        sortedChunks.push(transferInfo.chunks[i]);
                    }
                }
                
                const base64Data = sortedChunks.join('');
                const binaryString = atob(base64Data);
                const bytes = new Uint8Array(binaryString.length);
                
                for (let i = 0; i &lt; binaryString.length; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }
                
                const blob = new Blob([bytes], { type: transferInfo.type });
                const url = URL.createObjectURL(blob);
                
                // 创建下载链接
                const a = document.createElement('a');
                a.href = url;
                a.download = transferInfo.name;
                a.style.display = 'none';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                // 清理URL对象
                setTimeout(() =&gt; URL.revokeObjectURL(url), 1000);
                
                console.log('文件保存成功:', transferInfo.name);
                
            } catch (error) {
                console.error('组装文件失败:', error);
                transferInfo.status = 'failed';
                transferInfo.error = error.message;
                updateTransfersList();
                updateTransferStats();
                
                showNotification(`文件 ${transferInfo.name} 保存失败: ${error.message}`, 'error', '保存失败');
            }
        }

        // 发送聊天消息
        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            sendChatMessageFromInput(input);
        }

        function sendChatMessageMobile() {
            const input = document.getElementById('mobile-chat-input');
            sendChatMessageFromInput(input);
        }

        function sendChatMessageFromInput(input) {
            const message = input.value.trim();
            
            if (!message) {
                showNotification('消息不能为空', 'warning', '发送错误');
                return;
            }
            
            if (connections.size === 0) {
                showNotification('没有连接的设备', 'error', '发送错误');
                return;
            }
            
            const messageData = {
                type: 'chat-message',
                content: message,
                timestamp: Date.now(),
                sender: myPeerId,
                messageId: Date.now() + '_' + Math.random().toString(36).substr(2, 9)
            };
            
            // 添加到本地消息列表
            const localMessage = {
                id: messageData.messageId,
                content: message,
                sender: '我',
                timestamp: Date.now(),
                type: 'sent'
            };
            
            chatMessages.push(localMessage);
            updateChatDisplay();
            updateChatStats();
            
            // 发送给所有连接的设备
            let sentCount = 0;
            const messageString = JSON.stringify(messageData);
            
            connections.forEach((conn, peerId) =&gt; {
                if (conn &amp;&amp; conn.open) {
                    try {
                        conn.send(messageString);
                        sentCount++;
                    } catch (error) {
                        console.error('发送消息失败:', error);
                        showNotification(`发送给 ${peerId} 失败: ${error.message}`, 'error', '发送失败');
                    }
                }
            });
            
            if (sentCount === 0) {
                showNotification('消息发送失败，无可用连接', 'error', '发送失败');
                // 移除刚才添加的消息
                chatMessages.pop();
                updateChatDisplay();
                updateChatStats();
            } else {
                // 清空输入框
                input.value = '';
                input.focus();
                
                // 滚动到最新消息
                setTimeout(() =&gt; {
                    const chatContainer = isMobile ? 
                        document.getElementById('mobile-chat-messages') : 
                        document.getElementById('chat-messages');
                    if (chatContainer) {
                        chatContainer.scrollTop = chatContainer.scrollHeight;
                    }
                }, 100);
            }
        }

        // 清空聊天记录
        function clearChat() {
            if (chatMessages.length === 0) {
                showNotification('聊天记录已为空', 'info', '操作提示');
                return;
            }
            
            if (confirm(`确定要清空 ${chatMessages.length} 条聊天记录吗？`)) {
                chatMessages = [];
                updateChatDisplay();
                updateChatStats();
                showNotification('聊天记录已清空', 'success', '操作完成');
            }
        }

        // 发送文件
        async function sendSelectedFiles() {
            if (selectedFiles.length === 0) {
                showNotification('请先选择文件', 'warning', '发送错误');
                return;
            }
            
            if (connections.size === 0) {
                showNotification('没有连接的设备', 'error', '发送错误');
                return;
            }
            
            const sendTo = document.getElementById('send-to-select').value;
            const recipients = sendTo === 'all' ? Array.from(connections.keys()) : [sendTo];
            
            if (recipients.length === 0) {
                showNotification('没有可发送的设备', 'error', '发送错误');
                return;
            }
            
            // 发送每个文件
            for (const file of selectedFiles) {
                await sendFile(file, recipients);
                // 每个文件之间延迟1秒，避免网络拥塞
                await new Promise(resolve =&gt; setTimeout(resolve, 1000));
            }
        }

        async function sendSelectedFilesMobile() {
            if (selectedFiles.length === 0) {
                showNotification('请先选择文件', 'warning', '发送错误');
                return;
            }
            
            if (connections.size === 0) {
                showNotification('没有连接的设备', 'error', '发送错误');
                return;
            }
            
            const sendTo = document.getElementById('mobile-send-to-select').value;
            const recipients = sendTo === 'all' ? Array.from(connections.keys()) : [sendTo];
            
            if (recipients.length === 0) {
                showNotification('没有可发送的设备', 'error', '发送错误');
                return;
            }
            
            // 发送每个文件
            for (const file of selectedFiles) {
                await sendFile(file, recipients);
                // 每个文件之间延迟1秒，避免网络拥塞
                await new Promise(resolve =&gt; setTimeout(resolve, 1000));
            }
        }

        // 发送单个文件
        async function sendFile(file, recipients) {
            const transferId = 'transfer_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            const fileId = 'file_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            
            try {
                // 创建传输记录
                const transferInfo = {
                    id: transferId,
                    fileId: fileId,
                    name: file.name,
                    size: file.size,
                    type: file.type,
                    direction: 'sending',
                    recipients: recipients,
                    status: 'sending',
                    progress: 0,
                    startTime: Date.now()
                };
                
                transfers.set(transferId, transferInfo);
                updateTransfersList();
                updateTransferStats();
                
                // 读取文件为Base64 - 减小块大小提高稳定性
                const base64Data = await readFileAsBase64(file.file);
                const pureBase64 = base64Data.split(',')[1];
                
                // 减小块大小为16KB以提高稳定性
                const chunkSize = 16 * 1024;
                const totalChunks = Math.ceil(pureBase64.length / chunkSize);
                
                // 发送文件信息给每个接收者
                recipients.forEach(peerId =&gt; {
                    const conn = connections.get(peerId);
                    if (conn &amp;&amp; conn.open) {
                        try {
                            conn.send(JSON.stringify({
                                type: 'file-start',
                                transferId: transferId,
                                fileId: fileId,
                                fileName: file.name,
                                fileSize: file.size,
                                fileType: file.type,
                                totalChunks: totalChunks,
                                chunkSize: chunkSize,
                                timestamp: Date.now()
                            }));
                        } catch (error) {
                            console.error('发送文件开始信息失败:', error);
                        }
                    }
                });
                
                // 分块发送文件数据，增加延迟避免拥塞
                for (let i = 0; i &lt; totalChunks; i++) {
                    const start = i * chunkSize;
                    const end = Math.min(start + chunkSize, pureBase64.length);
                    const chunk = pureBase64.substring(start, end);
                    
                    const chunkData = {
                        type: 'file-chunk',
                        transferId: transferId,
                        chunkIndex: i,
                        data: chunk,
                        totalChunks: totalChunks
                    };
                    
                    // 发送给所有接收者
                    let sentToAll = true;
                    recipients.forEach(peerId =&gt; {
                        const conn = connections.get(peerId);
                        if (conn &amp;&amp; conn.open) {
                            try {
                                conn.send(JSON.stringify(chunkData));
                            } catch (error) {
                                console.error('发送文件块失败:', error);
                                sentToAll = false;
                            }
                        } else {
                            sentToAll = false;
                        }
                    });
                    
                    if (!sentToAll) {
                        throw new Error('部分设备连接丢失');
                    }
                    
                    // 更新进度
                    const progress = Math.round(((i + 1) / totalChunks) * 100);
                    transferInfo.progress = progress;
                    updateTransferProgress(transferId, progress);
                    
                    // 每发送10个块休息一下，避免拥塞
                    if (i % 10 === 0) {
                        await new Promise(resolve =&gt; setTimeout(resolve, 50));
                    }
                }
                
                // 发送完成标记
                recipients.forEach(peerId =&gt; {
                    const conn = connections.get(peerId);
                    if (conn &amp;&amp; conn.open) {
                        try {
                            conn.send(JSON.stringify({
                                type: 'file-end',
                                transferId: transferId,
                                success: true
                            }));
                        } catch (error) {
                            console.error('发送文件结束信息失败:', error);
                        }
                    }
                });
                
                // 更新传输状态
                transferInfo.status = 'completed';
                transferInfo.endTime = Date.now();
                transferInfo.progress = 100;
                updateTransfersList();
                updateTransferStats();
                
                showNotification(`文件 ${file.name} 发送完成`, 'success', '文件发送完成');
                
                // 从选中文件列表中移除
                removeFileFromList(file.id);
                
            } catch (error) {
                console.error('发送文件失败:', error);
                
                // 更新传输状态为失败
                const transferInfo = transfers.get(transferId);
                if (transferInfo) {
                    transferInfo.status = 'failed';
                    transferInfo.error = error.message;
                    transferInfo.endTime = Date.now();
                    updateTransfersList();
                    updateTransferStats();
                }
                
                // 发送错误通知给接收者
                recipients.forEach(peerId =&gt; {
                    const conn = connections.get(peerId);
                    if (conn &amp;&amp; conn.open) {
                        try {
                            conn.send(JSON.stringify({
                                type: 'file-error',
                                transferId: transferId,
                                error: error.message
                            }));
                        } catch (error) {
                            console.error('发送错误信息失败:', error);
                        }
                    }
                });
                
                showNotification(`文件 ${file.name} 发送失败: ${error.message}`, 'error', '发送失败');
            }
        }

        // 文件处理函数
        function readFileAsBase64(file) {
            return new Promise((resolve, reject) =&gt; {
                const reader = new FileReader();
                reader.onload = () =&gt; resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // 更新我的ID显示
        function updateMyIdDisplay() {
            if (myPeerId) {
                document.getElementById('my-id').textContent = myPeerId;
                if (isMobile) {
                    document.getElementById('mobile-my-id').textContent = myPeerId;
                }
                document.getElementById('qr-my-id').textContent = myPeerId;
            }
        }

        // 更新状态显示
        function updateStatus(text, status) {
            const statusElement = document.getElementById('status-text');
            const statusDot = document.getElementById('status-dot');
            
            statusElement.textContent = text;
            statusDot.className = 'status-dot';
            statusDot.classList.add(status);
        }

        // 更新已连接设备列表
        function updateConnectedDevicesList() {
            const desktopList = document.getElementById('devices-list');
            const mobileList = document.getElementById('mobile-devices-list');
            const sendToSelect = document.getElementById('send-to-select');
            const mobileSendToSelect = document.getElementById('mobile-send-to-select');
            const connectedCount = connections.size;
            
            document.getElementById('connected-count').textContent = connectedCount;
            document.getElementById('mobile-connected-count').textContent = connectedCount;
            
            if (connectedCount === 0) {
                desktopList.innerHTML = `
                    &lt;div class="empty-state"&gt;
                        &lt;i class="fas fa-user-friends"&gt;&lt;/i&gt;
                        &lt;h4&gt;暂无已连接的设备&lt;/h4&gt;
                        &lt;p&gt;连接其他设备后，可以开始聊天和传输文件&lt;/p&gt;
                    &lt;/div&gt;
                `;
                
                mobileList.innerHTML = `
                    &lt;div class="empty-state"&gt;
                        &lt;i class="fas fa-user-friends"&gt;&lt;/i&gt;
                        &lt;h4&gt;暂无已连接的设备&lt;/h4&gt;
                        &lt;p&gt;连接其他设备后，可以开始聊天和传输文件&lt;/p&gt;
                    &lt;/div&gt;
                `;
                
                sendToSelect.innerHTML = '&lt;option value="all"&gt;发送给所有设备&lt;/option&gt;';
                mobileSendToSelect.innerHTML = '&lt;option value="all"&gt;发送给所有设备&lt;/option&gt;';
                
                // 禁用发送按钮
                document.getElementById('send-files-btn').disabled = true;
                document.getElementById('mobile-send-files-btn').disabled = true;
                
                return;
            }
            
            // 更新设备列表
            let devicesHtml = '';
            let selectHtml = '&lt;option value="all"&gt;发送给所有设备&lt;/option&gt;';
            
            connections.forEach((conn, peerId) =&gt; {
                const shortPeerId = peerId.length &gt; 12 ? peerId.substring(0, 12) + '...' : peerId;
                const avatarText = peerId.substring(0, 2).toUpperCase();
                
                devicesHtml += `
                    &lt;div class="device-item"&gt;
                        &lt;div class="device-info"&gt;
                            &lt;div class="device-avatar"&gt;${avatarText}&lt;/div&gt;
                            &lt;div class="device-details"&gt;
                                &lt;div class="device-name"&gt;设备 ${peerId.substring(0, 6)}...&lt;/div&gt;
                                &lt;div class="device-id"&gt;${shortPeerId}&lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="device-status"&gt;
                            &lt;div class="status-indicator ${conn.open ? '' : 'disconnected'}"&gt;&lt;/div&gt;
                            &lt;span style="color: var(--text-secondary); font-size: 0.85rem;"&gt;
                                ${conn.open ? '在线' : '离线'}
                            &lt;/span&gt;
                            &lt;button class="btn btn-sm btn-outline" style="margin-left: 10px;"&gt;
                                &lt;i class="fas fa-times"&gt;&lt;/i&gt;
                            &lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                `;
                
                if (conn.open) {
                    const displayName = peerId.length &gt; 8 ? peerId.substring(0, 8) + '...' : peerId;
                    selectHtml += `&lt;option value="${peerId}"&gt;发送给 ${displayName}&lt;/option&gt;`;
                }
            });
            
            desktopList.innerHTML = devicesHtml;
            mobileList.innerHTML = devicesHtml;
            sendToSelect.innerHTML = selectHtml;
            mobileSendToSelect.innerHTML = selectHtml;
            
            // 启用发送按钮
            document.getElementById('send-files-btn').disabled = false;
            document.getElementById('mobile-send-files-btn').disabled = false;
        }

        // 更新聊天显示
        function updateChatDisplay() {
            const desktopChat = document.getElementById('chat-messages');
            const mobileChat = document.getElementById('mobile-chat-messages');
            
            if (chatMessages.length === 0) {
                desktopChat.innerHTML = `
                    &lt;div class="empty-state"&gt;
                        &lt;i class="fas fa-comment-dots"&gt;&lt;/i&gt;
                        &lt;h4&gt;暂无聊天消息&lt;/h4&gt;
                        &lt;p&gt;连接设备后即可开始聊天&lt;/p&gt;
                    &lt;/div&gt;
                `;
                
                mobileChat.innerHTML = `
                    &lt;div class="empty-state"&gt;
                        &lt;i class="fas fa-comment-dots"&gt;&lt;/i&gt;
                        &lt;h4&gt;暂无聊天消息&lt;/h4&gt;
                        &lt;p&gt;连接设备后即可开始聊天&lt;/p&gt;
                    &lt;/div&gt;
                `;
                
                return;
            }
            
            // 显示消息
            let html = '';
            chatMessages.forEach(msg =&gt; {
                const time = new Date(msg.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                const senderDisplay = msg.type === 'sent' ? '我' : (msg.sender.length &gt; 8 ? msg.sender.substring(0, 8) + '...' : msg.sender);
                
                html += `
                    &lt;div class="message ${msg.type}"&gt;
                        &lt;div class="message-bubble"&gt;${escapeHtml(msg.content)}&lt;/div&gt;
                        &lt;div class="message-meta"&gt;
                            &lt;span class="message-sender"&gt;${senderDisplay}&lt;/span&gt;
                            &lt;span class="message-time"&gt;${time}&lt;/span&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                `;
            });
            
            desktopChat.innerHTML = html;
            mobileChat.innerHTML = html;
            
            // 滚动到底部
            setTimeout(() =&gt; {
                desktopChat.scrollTop = desktopChat.scrollHeight;
                mobileChat.scrollTop = mobileChat.scrollHeight;
            }, 100);
        }

        // 更新聊天统计
        function updateChatStats() {
            const chatCount = document.getElementById('chat-count');
            chatCount.textContent = `${chatMessages.length} 条消息`;
        }

        // 更新传输列表
        function updateTransfersList() {
            const desktopList = document.getElementById('transfers-list');
            const mobileList = document.getElementById('mobile-transfers-list');
            
            if (transfers.size === 0) {
                desktopList.innerHTML = `
                    &lt;div class="empty-state"&gt;
                        &lt;i class="fas fa-exchange-alt"&gt;&lt;/i&gt;
                        &lt;h4&gt;暂无传输任务&lt;/h4&gt;
                        &lt;p&gt;文件传输将在此显示进度&lt;/p&gt;
                    &lt;/div&gt;
                `;
                
                mobileList.innerHTML = `
                    &lt;div class="empty-state"&gt;
                        &lt;i class="fas fa-exchange-alt"&gt;&lt;/i&gt;
                        &lt;h4&gt;暂无传输任务&lt;/h4&gt;
                        &lt;p&gt;文件传输将在此显示进度&lt;/p&gt;
                    &lt;/div&gt;
                `;
                
                return;
            }
            
            // 更新传输列表
            let desktopHtml = '';
            let mobileHtml = '';
            
            transfers.forEach((transfer, transferId) =&gt; {
                const iconClass = transfer.direction === 'sending' ? 'sending' : 
                                 transfer.status === 'receiving' ? 'receiving' : 'completed';
                const icon = transfer.direction === 'sending' ? 'fa-upload' : 'fa-download';
                const directionText = transfer.direction === 'sending' ? '发送给' : '来自';
                const peerDisplay = transfer.direction === 'sending' ? 
                    (transfer.recipients &amp;&amp; transfer.recipients.length &gt; 0 ? 
                     (transfer.recipients.length === 1 ? transfer.recipients[0].substring(0, 8) + '...' : '多个设备') : '未知设备') : 
                    (transfer.peerId ? transfer.peerId.substring(0, 8) + '...' : '未知设备');
                
                const fileSize = formatBytes(transfer.size);
                const transferItem = `
                    &lt;div class="transfer-item" id="transfer-${transferId}"&gt;
                        &lt;div class="transfer-icon ${iconClass}"&gt;
                            &lt;i class="fas ${icon}"&gt;&lt;/i&gt;
                        &lt;/div&gt;
                        &lt;div class="transfer-info"&gt;
                            &lt;div class="transfer-name"&gt;${transfer.name}&lt;/div&gt;
                            &lt;div class="transfer-details"&gt;
                                &lt;span&gt;${fileSize} &amp;#8226; ${directionText} ${peerDisplay}&lt;/span&gt;
                                &lt;span class="transfer-status ${transfer.status}"&gt;${getStatusText(transfer.status)}&lt;/span&gt;
                            &lt;/div&gt;
                            &lt;div class="transfer-progress"&gt;
                                &lt;div class="transfer-progress-bar" id="progress-${transferId}" style="width: ${transfer.progress}%"&gt;&lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="transfer-actions"&gt;
                            ${transfer.status === 'completed' ? 
                                `&lt;button class="btn btn-sm btn-outline" title="打开文件"&gt;
                                    &lt;i class="fas fa-folder-open"&gt;&lt;/i&gt;
                                &lt;/button&gt;` : ''}
                            &lt;button class="btn btn-sm btn-outline" title="删除记录"&gt;
                                &lt;i class="fas fa-trash"&gt;&lt;/i&gt;
                            &lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                `;
                
                desktopHtml += transferItem;
                mobileHtml += transferItem;
            });
            
            desktopList.innerHTML = desktopHtml;
            mobileList.innerHTML = mobileHtml;
        }

        // 更新传输进度
        function updateTransferProgress(transferId, progress) {
            const progressBar = document.getElementById(`progress-${transferId}`);
            if (progressBar) {
                progressBar.style.width = `${progress}%`;
            }
        }

        // 更新传输统计
        function updateTransferStats() {
            let active = 0;
            let completed = 0;
            let failed = 0;
            
            transfers.forEach(transfer =&gt; {
                if (transfer.status === 'sending' || transfer.status === 'receiving') {
                    active++;
                } else if (transfer.status === 'completed') {
                    completed++;
                } else if (transfer.status === 'failed') {
                    failed++;
                }
            });
            
            document.getElementById('active-transfers').textContent = active;
            document.getElementById('completed-transfers').textContent = completed;
            document.getElementById('failed-transfers').textContent = failed;
            
            document.getElementById('mobile-active-transfers').textContent = active;
            document.getElementById('mobile-completed-transfers').textContent = completed;
            document.getElementById('mobile-failed-transfers').textContent = failed;
        }

        // 获取状态文本
        function getStatusText(status) {
            const statusMap = {
                'sending': '发送中',
                'receiving': '接收中',
                'completed': '已完成',
                'failed': '失败'
            };
            return statusMap[status] || status;
        }

        // 断开连接
        function disconnectPeer(peerId) {
            const conn = connections.get(peerId);
            if (conn) {
                conn.close();
                connections.delete(peerId);
                updateConnectedDevicesList();
                showNotification(`已断开与 ${peerId} 的连接`, 'info', '连接断开');
            }
        }

        // 复制我的ID
        function copyMyId() {
            if (!myPeerId) {
                showNotification('ID还未生成', 'error', '复制失败');
                return;
            }
            
            navigator.clipboard.writeText(myPeerId).then(() =&gt; {
                const copyBtn = document.getElementById('copy-btn');
                if (copyBtn) {
                    const originalHtml = copyBtn.innerHTML;
                    
                    copyBtn.innerHTML = '&lt;i class="fas fa-check"&gt;&lt;/i&gt; 已复制';
                    copyBtn.style.background = 'linear-gradient(135deg, var(--success), #34d399)';
                    copyBtn.style.color = 'white';
                    copyBtn.style.border = 'none';
                    
                    // 3秒后恢复原状
                    setTimeout(() =&gt; {
                        copyBtn.innerHTML = originalHtml;
                        copyBtn.style.background = '';
                        copyBtn.style.color = '';
                        copyBtn.style.border = '';
                    }, 3000);
                }
                
                showNotification('设备ID已复制到剪贴板', 'success', '复制成功');
            }).catch(err =&gt; {
                console.error('复制失败:', err);
                showNotification('复制失败，请手动复制', 'error', '复制失败');
            });
        }

        // 打开二维码连接弹窗
        function openQRConnectModal() {
            const modal = document.getElementById('qr-connect-modal');
            modal.classList.add('active');
            
            // 默认切换到生成二维码选项卡
            switchQRTab('generate');
            
            // 生成二维码
            generateQRCode();
        }

        // 切换二维码选项卡
        function switchQRTab(tab) {
            // 更新选项卡按钮状态
            document.querySelectorAll('.qr-tab').forEach(tabElement =&gt; {
                tabElement.classList.remove('active');
            });
            
            document.querySelectorAll('.qr-tab-content').forEach(content =&gt; {
                content.classList.remove('active');
            });
            
            // 激活选中的选项卡
            document.querySelectorAll('.qr-tab').forEach(tabElement =&gt; {
                if (tabElement.querySelector('span').textContent.includes(tab === 'generate' ? '生成' : '扫描')) {
                    tabElement.classList.add('active');
                }
            });
            
            document.getElementById(`${tab}-tab`).classList.add('active');
            
            // 如果切换到扫描选项卡，初始化扫码器
            if (tab === 'scan') {
                setTimeout(() =&gt; {
                    initQRCodeScanner();
                }, 100);
            } else {
                // 如果切换到生成选项卡，停止扫码
                stopScanning();
            }
        }

        // 生成二维码
        function generateQRCode() {
            if (!myPeerId) {
                showNotification('ID还未生成', 'error', '二维码生成失败');
                return;
            }
            
            const qrContainer = document.getElementById('qrcode');
            
            // 清空之前的二维码
            qrContainer.innerHTML = '';
            
            // 生成二维码数据（包含服务器信息以便连接）
            const qrData = JSON.stringify({
                type: 'peerjs-connect',
                peerId: myPeerId,
                server: '0.peerjs.com',
                port: 443,
                path: '/',
                timestamp: Date.now(),
                app: '零流量互传'
            });
            
            // 生成二维码
            new QRCode(qrContainer, {
                text: qrData,
                width: 200,
                height: 200,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
        }

        // 复制二维码到剪贴板
        function copyQRCodeToClipboard() {
            const qrCanvas = document.querySelector('#qrcode canvas');
            if (qrCanvas) {
                qrCanvas.toBlob((blob) =&gt; {
                    const item = new ClipboardItem({ "image/png": blob });
                    navigator.clipboard.write([item]).then(() =&gt; {
                        showNotification('二维码已复制到剪贴板', 'success', '复制成功');
                    }).catch(err =&gt; {
                        console.error('复制二维码失败:', err);
                        showNotification('复制失败，请手动保存', 'error', '复制失败');
                    });
                });
            }
        }

        // 显示分享说明
        function showShareInstructions() {
            alert('连接说明：\n\n1. 确保两台设备都在线并打开此应用\n2. 在设备A上点击"生成二维码"\n3. 在设备B上点击"扫描二维码"，扫描设备A的二维码\n4. 连接成功后即可开始聊天和传输文件');
        }

        // 下载二维码
        function downloadQRCode() {
            const qrCanvas = document.querySelector('#qrcode canvas');
            if (qrCanvas) {
                const link = document.createElement('a');
                link.download = `qrcode-${myPeerId}.png`;
                link.href = qrCanvas.toDataURL('image/png');
                link.click();
                showNotification('二维码已保存', 'success', '保存成功');
            }
        }

        // 初始化二维码扫描器
        function initQRCodeScanner() {
            scanVideo = document.getElementById('scan-video');
            
            if (!scanVideo) {
                console.error('扫码组件未找到');
                return;
            }
            
            // 创建Canvas用于扫描
            if (!scanCanvas) {
                scanCanvas = document.createElement('canvas');
                scanContext = scanCanvas.getContext('2d');
            }
            
            // 请求摄像头权限
            const constraints = {
                video: {
                    facingMode: currentFacingMode,
                    width: { ideal: 1280 },
                    height: { ideal: 720 }
                }
            };
            
            navigator.mediaDevices.getUserMedia(constraints)
                .then((stream) =&gt; {
                    scanStream = stream;
                    scanVideo.srcObject = stream;
                    scanVideo.play();
                    
                    // 开始扫描
                    startScanning();
                    showScanMessage('正在扫描二维码...');
                })
                .catch((error) =&gt; {
                    console.error('摄像头访问失败:', error);
                    showNotification('摄像头访问失败，请检查权限', 'error', '扫码失败');
                    showScanMessage('摄像头访问失败，请检查权限');
                    
                    // 显示手动输入区域
                    document.getElementById('manual-qr-input').style.display = 'block';
                });
        }

        // 开始扫描
        function startScanning() {
            if (!scanVideo || !scanCanvas || !scanContext) {
                return;
            }
            
            // 设置Canvas尺寸与视频一致
            scanCanvas.width = scanVideo.videoWidth;
            scanCanvas.height = scanVideo.videoHeight;
            
            // 扫描函数
            function scan() {
                if (scanVideo.readyState === scanVideo.HAVE_ENOUGH_DATA) {
                    // 绘制视频帧到Canvas
                    scanContext.drawImage(scanVideo, 0, 0, scanCanvas.width, scanCanvas.height);
                    
                    // 获取图像数据
                    const imageData = scanContext.getImageData(0, 0, scanCanvas.width, scanCanvas.height);
                    
                    // 使用jsQR解析二维码
                    const code = jsQR(imageData.data, imageData.width, imageData.height, {
                        inversionAttempts: 'dontInvert',
                    });
                    
                    // 如果找到二维码
                    if (code) {
                        console.log('找到二维码:', code.data);
                        handleScannedQR(code.data);
                        stopScanning();
                    }
                }
                
                // 继续扫描
                scanAnimation = requestAnimationFrame(scan);
            }
            
            // 开始扫描循环
            isScanning = true;
            scanAnimation = requestAnimationFrame(scan);
        }

        // 处理扫描到的二维码
        function handleScannedQR(decodedText) {
            console.log('扫描到二维码:', decodedText);
            showScanMessage('二维码扫描成功，正在处理...');
            
            try {
                // 尝试解析JSON
                const qrData = JSON.parse(decodedText);
                if (qrData.type === 'peerjs-connect' &amp;&amp; qrData.peerId) {
                    // 自动连接
                    showScanMessage('正在连接设备...');
                    setTimeout(() =&gt; {
                        connectToPeerById(qrData.peerId);
                        showNotification('扫描成功，正在连接...', 'success', '扫码成功');
                        closeQRConnectModal();
                    }, 500);
                } else {
                    showScanMessage('无效的二维码数据');
                }
            } catch (error) {
                // 如果不是JSON，尝试直接作为Peer ID连接
                if (decodedText.length &gt;= 10 &amp;&amp; decodedText.length &lt;= 50) {
                    showScanMessage('正在连接设备...');
                    setTimeout(() =&gt; {
                        connectToPeerById(decodedText);
                        showNotification('扫描成功，正在连接...', 'success', '扫码成功');
                        closeQRConnectModal();
                    }, 500);
                } else {
                    showScanMessage('无法识别的二维码格式');
                }
            }
        }

        // 显示扫描消息
        function showScanMessage(message) {
            const scanMessage = document.getElementById('scan-message');
            scanMessage.textContent = message;
            scanMessage.classList.add('active');
            
            // 3秒后隐藏消息
            setTimeout(() =&gt; {
                scanMessage.classList.remove('active');
            }, 3000);
        }

        // 切换摄像头
        function switchCamera() {
            currentFacingMode = currentFacingMode === 'environment' ? 'user' : 'environment';
            
            // 停止当前流
            stopScanning();
            
            // 重新初始化扫码器
            setTimeout(() =&gt; {
                initQRCodeScanner();
            }, 100);
        }

        // 停止扫描
        function stopScanning() {
            if (scanAnimation) {
                cancelAnimationFrame(scanAnimation);
                scanAnimation = null;
            }
            
            isScanning = false;
        }

        // 关闭二维码弹窗
        function closeQRConnectModal() {
            stopScanning();
            
            if (scanStream) {
                scanStream.getTracks().forEach(track =&gt; track.stop());
                scanStream = null;
            }
            
            if (scanVideo) {
                scanVideo.srcObject = null;
            }
            
            const modal = document.getElementById('qr-connect-modal');
            modal.classList.remove('active');
        }

        // 从手动输入连接
        function connectFromManualInput() {
            const input = document.getElementById('manual-qr-input');
            const text = input.value.trim();
            
            if (!text) {
                showNotification('请输入二维码内容', 'error', '输入错误');
                return;
            }
            
            handleScannedQR(text);
            input.value = '';
        }

        // 切换移动端选项卡
        function switchMobileTab(tab) {
            // 更新导航按钮状态
            document.querySelectorAll('.nav-item').forEach(item =&gt; {
                item.classList.remove('active');
                if (item.getAttribute('data-tab') === tab) {
                    item.classList.add('active');
                }
            });
            
            // 更新选项卡内容
            document.querySelectorAll('.mobile-tab-content').forEach(content =&gt; {
                content.classList.remove('active');
            });
            
            document.getElementById(`mobile-${tab}`).classList.add('active');
        }

        // 设置移动端特定功能
        function setupMobileFeatures() {
            // 为聊天输入框添加发送快捷键
            const mobileChatInput = document.getElementById('mobile-chat-input');
            if (mobileChatInput) {
                mobileChatInput.addEventListener('keydown', (e) =&gt; {
                    if (e.key === 'Enter' &amp;&amp; !e.shiftKey) {
                        e.preventDefault();
                        sendChatMessageMobile();
                    }
                });
            }
            
            // 为桌面版聊天输入框添加发送快捷键
            const desktopChatInput = document.getElementById('chat-input');
            if (desktopChatInput) {
                desktopChatInput.addEventListener('keydown', (e) =&gt; {
                    if (e.key === 'Enter' &amp;&amp; !e.shiftKey) {
                        e.preventDefault();
                        sendChatMessage();
                    }
                });
            }
            
            // 为文件输入框添加监听
            const mobileFileInput = document.getElementById('mobile-file-input');
            if (mobileFileInput) {
                mobileFileInput.addEventListener('change', (e) =&gt; {
                    handleFileSelect(e, true);
                });
            }
            
            // 拖放区域
            const mobileDropZone = document.getElementById('mobile-drop-zone');
            if (mobileDropZone) {
                mobileDropZone.addEventListener('dragover', handleDragOver);
                mobileDropZone.addEventListener('dragleave', handleDragLeave);
                mobileDropZone.addEventListener('drop', (e) =&gt; {
                    handleDrop(e, true);
                });
            }
            
            // 自动切换到连接标签页
            switchMobileTab('connection');
        }

        // 处理文件选择
        function handleFileSelect(event, isMobile = false) {
            const files = Array.from(event.target.files);
            if (files.length &gt; 0) {
                addFilesToTransferList(files, isMobile);
            }
            event.target.value = '';
        }

        // 处理拖放
        function handleDragOver(event) {
            event.preventDefault();
            event.stopPropagation();
            event.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(event) {
            event.preventDefault();
            event.stopPropagation();
            event.currentTarget.classList.remove('dragover');
        }

        function handleDrop(event, isMobile = false) {
            event.preventDefault();
            event.stopPropagation();
            event.currentTarget.classList.remove('dragover');
            
            const files = Array.from(event.dataTransfer.files);
            if (files.length &gt; 0) {
                addFilesToTransferList(files, isMobile);
            }
        }

        // 添加文件到传输列表
        function addFilesToTransferList(files, isMobile = false) {
            files.forEach(file =&gt; {
                const fileId = 'file_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                
                selectedFiles.push({
                    id: fileId,
                    file: file,
                    name: file.name,
                    size: file.size,
                    type: file.type
                });
                
                addFileToUI({
                    id: fileId,
                    name: file.name,
                    size: file.size,
                    type: file.type
                }, isMobile);
            });
            
            showNotification(`已添加 ${files.length} 个文件`, 'success', '文件添加');
            
            // 启用发送按钮
            if (!isMobile) {
                document.getElementById('send-files-btn').disabled = false;
            } else {
                document.getElementById('mobile-send-files-btn').disabled = false;
            }
        }

        // 添加文件到UI
        function addFileToUI(file, isMobile = false) {
            const fileList = isMobile ? 
                document.getElementById('mobile-files-list') : 
                document.getElementById('files-list');
            
            // 移除空状态
            if (fileList.querySelector('.empty-state')) {
                fileList.innerHTML = '';
            }
            
            const fileElement = document.createElement('div');
            fileElement.className = 'file-item';
            fileElement.id = `file-${file.id}`;
            
            const size = formatBytes(file.size);
            const icon = getFileIcon(file.type);
            
            fileElement.innerHTML = `
                &lt;div class="file-icon"&gt;
                    &lt;i class="${icon}"&gt;&lt;/i&gt;
                &lt;/div&gt;
                &lt;div class="file-info"&gt;
                    &lt;div class="file-name"&gt;${file.name}&lt;/div&gt;
                    &lt;div class="file-details"&gt;
                        &lt;span&gt;${size}&lt;/span&gt;
                        &lt;span&gt;${getFileType(file.type)}&lt;/span&gt;
                    &lt;/div&gt;
                    &lt;div class="file-progress"&gt;
                        &lt;div class="file-progress-bar" id="progress-${file.id}" style="width: 0%"&gt;&lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;button class="btn btn-sm btn-outline"&gt;
                    &lt;i class="fas fa-times"&gt;&lt;/i&gt;
                &lt;/button&gt;
            `;
            
            fileList.appendChild(fileElement);
        }

        // 获取文件图标
        function getFileIcon(type) {
            if (type.startsWith('image/')) return 'fas fa-file-image';
            if (type.startsWith('video/')) return 'fas fa-file-video';
            if (type.startsWith('audio/')) return 'fas fa-file-audio';
            if (type === 'application/pdf') return 'fas fa-file-pdf';
            if (type.includes('word')) return 'fas fa-file-word';
            if (type.includes('excel') || type.includes('sheet')) return 'fas fa-file-excel';
            if (type.includes('powerpoint') || type.includes('presentation')) return 'fas fa-file-powerpoint';
            if (type.includes('zip') || type.includes('compressed')) return 'fas fa-file-archive';
            if (type.includes('text/')) return 'fas fa-file-alt';
            return 'fas fa-file';
        }

        // 获取文件类型
        function getFileType(type) {
            if (type.startsWith('image/')) return '图片';
            if (type.startsWith('video/')) return '视频';
            if (type.startsWith('audio/')) return '音频';
            if (type === 'application/pdf') return 'PDF文档';
            if (type.includes('word')) return 'Word文档';
            if (type.includes('excel') || type.includes('sheet')) return 'Excel文档';
            if (type.includes('powerpoint') || type.includes('presentation')) return 'PPT文档';
            if (type.includes('zip') || type.includes('compressed')) return '压缩文件';
            if (type.includes('text/')) return '文本文件';
            return '文件';
        }

        // 从列表中移除文件
        function removeFileFromList(fileId, isMobile = false) {
            // 从selectedFiles中移除
            const index = selectedFiles.findIndex(f =&gt; f.id === fileId);
            if (index &gt; -1) {
                selectedFiles.splice(index, 1);
            }
            
            // 从UI中移除
            const fileElement = document.getElementById(`file-${fileId}`);
            if (fileElement) {
                fileElement.remove();
            }
            
            // 如果列表为空，显示空状态
            const desktopList = document.getElementById('files-list');
            const mobileList = document.getElementById('mobile-files-list');
            
            if (selectedFiles.length === 0) {
                if (desktopList.children.length === 0) {
                    desktopList.innerHTML = `
                        &lt;div class="empty-state"&gt;
                            &lt;i class="fas fa-file-import"&gt;&lt;/i&gt;
                            &lt;h4&gt;暂无待传输文件&lt;/h4&gt;
                            &lt;p&gt;添加文件并发送给已连接的设备&lt;/p&gt;
                        &lt;/div&gt;
                    `;
                }
                
                if (mobileList.children.length === 0) {
                    mobileList.innerHTML = `
                        &lt;div class="empty-state"&gt;
                            &lt;i class="fas fa-file-import"&gt;&lt;/i&gt;
                            &lt;h4&gt;暂无待传输文件&lt;/h4&gt;
                            &lt;p&gt;添加文件并发送给已连接的设备&lt;/p&gt;
                        &lt;/div&gt;
                    `;
                }
                
                // 禁用发送按钮
                document.getElementById('send-files-btn').disabled = true;
                document.getElementById('mobile-send-files-btn').disabled = true;
            }
        }

        // 清空文件列表
        function clearFileList() {
            if (selectedFiles.length === 0) {
                showNotification('文件列表已为空', 'info', '操作提示');
                return;
            }
            
            if (confirm(`确定要清空 ${selectedFiles.length} 个文件吗？`)) {
                selectedFiles = [];
                
                const desktopList = document.getElementById('files-list');
                const mobileList = document.getElementById('mobile-files-list');
                
                desktopList.innerHTML = `
                    &lt;div class="empty-state"&gt;
                        &lt;i class="fas fa-file-import"&gt;&lt;/i&gt;
                        &lt;h4&gt;暂无待传输文件&lt;/h4&gt;
                        &lt;p&gt;添加文件并发送给已连接的设备&lt;/p&gt;
                    &lt;/div&gt;
                `;
                
                mobileList.innerHTML = `
                    &lt;div class="empty-state"&gt;
                        &lt;i class="fas fa-file-import"&gt;&lt;/i&gt;
                        &lt;h4&gt;暂无待传输文件&lt;/h4&gt;
                        &lt;p&gt;添加文件并发送给已连接的设备&lt;/p&gt;
                    &lt;/div&gt;
                `;
                
                // 禁用发送按钮
                document.getElementById('send-files-btn').disabled = true;
                document.getElementById('mobile-send-files-btn').disabled = true;
                
                showNotification('文件列表已清空', 'success', '操作完成');
            }
        }

        // 打开传输文件
        function openTransferFile(transferId) {
            const transfer = transfers.get(transferId);
            if (transfer &amp;&amp; transfer.status === 'completed') {
                showNotification('文件已保存在下载文件夹中', 'info', '文件位置');
            }
        }

        // 移除传输记录
        function removeTransfer(transferId) {
            if (confirm('确定要删除此传输记录吗？')) {
                transfers.delete(transferId);
                updateTransfersList();
                updateTransferStats();
                showNotification('传输记录已删除', 'success', '操作完成');
            }
        }

        // 刷新传输列表
        function refreshTransfers() {
            updateTransfersList();
            updateTransferStats();
            showNotification('传输列表已刷新', 'success', '刷新完成');
        }

        // 显示通知
        function showNotification(message, type = 'info', title = '通知') {
            const notifications = document.getElementById('notifications');
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            let icon = 'fas fa-info-circle';
            if (type === 'success') icon = 'fas fa-check-circle';
            if (type === 'error') icon = 'fas fa-exclamation-circle';
            if (type === 'warning') icon = 'fas fa-exclamation-triangle';
            
            notification.innerHTML = `
                &lt;div class="notification-icon"&gt;
                    &lt;i class="${icon}"&gt;&lt;/i&gt;
                &lt;/div&gt;
                &lt;div class="notification-content"&gt;
                    &lt;div class="notification-title"&gt;${title}&lt;/div&gt;
                    &lt;div class="notification-message"&gt;${message}&lt;/div&gt;
                &lt;/div&gt;
                &lt;button class="notification-close"&gt;
                    &lt;i class="fas fa-times"&gt;&lt;/i&gt;
                &lt;/button&gt;
            `;
            
            notifications.appendChild(notification);
            
            // 自动移除通知
            setTimeout(() =&gt; {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 5000);
        }

        // 清理资源
        function cleanupResources() {
            // 关闭所有连接
            connections.forEach((conn, peerId) =&gt; {
                if (conn &amp;&amp; conn.open) {
                    conn.close();
                }
            });
            
            // 销毁peer实例
            if (peer &amp;&amp; !peer.destroyed) {
                peer.destroy();
            }
            
            // 停止扫码
            stopScanning();
        }

        // 工具函数
        function generateDeviceId() {
            return 'YS_' + Math.random().toString(36).substr(2, 8).toUpperCase();
        }

        function formatBytes(bytes) {
            if (bytes === 0) return '0 B';
            const k = 1024;
            const sizes = ['B', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // 设置事件监听器
        function setupEventListeners() {
            // 桌面版文件输入
            const fileInput = document.getElementById('file-input');
            if (fileInput) {
                fileInput.addEventListener('change', (e) =&gt; handleFileSelect(e, false));
            }
            
            // 桌面版拖放区域
            const dropZone = document.getElementById('drop-zone');
            if (dropZone) {
                dropZone.addEventListener('dragover', handleDragOver);
                dropZone.addEventListener('dragleave', handleDragLeave);
                dropZone.addEventListener('drop', (e) =&gt; handleDrop(e, false));
            }
            
            // 桌面版连接输入框回车连接
            const peerIdInput = document.getElementById('peer-id-input');
            if (peerIdInput) {
                peerIdInput.addEventListener('keydown', (e) =&gt; {
                    if (e.key === 'Enter') {
                        connectToPeer();
                    }
                });
            }
            
            // 移动版连接输入框回车连接
            const mobilePeerIdInput = document.getElementById('mobile-peer-id-input');
            if (mobilePeerIdInput) {
                mobilePeerIdInput.addEventListener('keydown', (e) =&gt; {
                    if (e.key === 'Enter') {
                        connectToPeerMobile();
                    }
                });
            }
            
            // 手动输入二维码内容回车连接
            const manualQrInput = document.getElementById('manual-qr-input');
            if (manualQrInput) {
                manualQrInput.addEventListener('keydown', (e) =&gt; {
                    if (e.key === 'Enter') {
                        connectFromManualInput();
                    }
                });
            }
            
            // 页面可见性变化时更新状态
            document.addEventListener('visibilitychange', () =&gt; {
                if (!document.hidden) {
                    updateConnectedDevicesList();
                    updateTransfersList();
                }
            });
        }

        // 全局函数导出
        window.copyMyId = copyMyId;
        window.connectToPeer = connectToPeer;
        window.connectToPeerMobile = connectToPeerMobile;
        window.sendChatMessage = sendChatMessage;
        window.sendChatMessageMobile = sendChatMessageMobile;
        window.clearChat = clearChat;
        window.sendSelectedFiles = sendSelectedFiles;
        window.sendSelectedFilesMobile = sendSelectedFilesMobile;
        window.clearFileList = clearFileList;
        window.removeFileFromList = removeFileFromList;
        window.disconnectPeer = disconnectPeer;
        window.openQRConnectModal = openQRConnectModal;
        window.closeQRConnectModal = closeQRConnectModal;
        window.switchQRTab = switchQRTab;
        window.downloadQRCode = downloadQRCode;
        window.switchCamera = switchCamera;
        window.stopScanning = stopScanning;
        window.connectFromManualInput = connectFromManualInput;
        window.switchMobileTab = switchMobileTab;
        window.openTransferFile = openTransferFile;
        window.removeTransfer = removeTransfer;
        window.refreshTransfers = refreshTransfers;
        window.copyQRCodeToClipboard = copyQRCodeToClipboard;
        window.showShareInstructions = showShareInstructions;
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div></td></tr></table>
</div>
<div class="cm" id="comment_54634955">
</div>
<div id="post_rate_div_54634955"></div>
</div>
</div>
</td></tr>
<tr><td class="plc plm">
<div class="mtw mbm hm cl" id="p_btn">
<a href="home.php?mod=spacecp&amp;ac=favorite&amp;type=thread&amp;id=2085764&amp;formhash=7f5fdc25" id="k_favorite" onclick="showWindow(this.id, this.href, 'get', 0);" onmouseover="this.title = $('favoritenumber').innerHTML + ' 人收藏'" rel="nofollow" title="收藏本帖"><i><img alt="收藏" src="../common_images/fav.gif"/>收藏<span id="favoritenumber" style="display:none">0</span></i></a>
<a href="javascript:;" id="ak_rate" onclick="showWindow('rate', 'forum.php?mod=misc&amp;action=rate&amp;tid=2085764&amp;pid=54634955', 'get', -1);return false;" title="评分表立场"><i><img alt="免费评分" src="../common_images/agree.gif"/>免费评分</i></a>
<a href="forum.php?mod=collection&amp;action=edit&amp;op=addthread&amp;tid=2085764" id="k_collect" onclick="showWindow(this.id, this.href);return false;" onmouseover="this.title = $('collectionnumber').innerHTML + ' 人淘帖'" rel="nofollow" title="淘好帖进专辑"><i><img alt="分享" src="../common_images/collection.png"/>淘帖<span id="collectionnumber" style="display:none">0</span></i></a>
<a href="forum.php?mod=misc&amp;action=recommend&amp;do=add&amp;tid=2085764&amp;hash=7f5fdc25" id="recommend_add" onclick="ajaxmenu(this, 3000, 1, 0, '43', 'recommendupdate(1)');return false;" onmouseover="this.title = $('recommendv_add').innerHTML + ' 人有用'" rel="nofollow" title="顶一下"><i><img alt="有用" src="../common_images/rec_add.gif"/>有用<span id="recommendv_add" style="display:none">0</span></i></a>
<a class="followp" false;="" href="" onclick='showWindow("csu_wechat_scan_qrcode","plugin.php?id=csu_wechat_scan:share&amp;tid=2085764","get",0);' return=""><i><img src="../common_images/wx.png"/>分享到朋友圈</i></a>
<a href="plugin.php?id=nds_votekick:nds_votekickcp&amp;tid=2085764" id="k_votekickt" onclick="showWindow(this.id, this.href, 'get', 0);" onmouseover="this.title ='还差6票'"> <i><img alt="踢垃圾帖" src="../common_images/recyclebin.gif">踢垃圾帖<span id="votes">0</span>⁄<span id="votemax">6</span> </img></i></a>
</div>
<div class="vw50_kfc_pb"><span style="color:#008000;"><p>发帖前要善用<strong>【<a href="//www.52pojie.cn/search.php" target="_blank">论坛搜索</a>】</strong>功能，那里可能会有你要找的答案或者已经有人发布过相同内容了，请勿重复发帖。</p></span></div></td>
</tr>
<tr id="_postposition54634955"></tr>
<tr>
<td class="pls"></td>
<td class="plc" style="overflow:visible;">
<div class="po hin">
<div class="pob cl">
<em>
<a class="cmmnt" href="forum.php?mod=misc&amp;action=comment&amp;tid=2085764&amp;pid=54634955&amp;extra=page%3D1&amp;page=1" onclick="showWindow('comment', this.href, 'get', 0)">点评</a><a class="fastre" href="forum.php?mod=post&amp;action=reply&amp;fid=24&amp;tid=2085764&amp;reppost=54634955&amp;extra=page%3D1&amp;page=1" onclick="showWindow('reply', this.href)" rel="nofollow">回复</a>
</em>
<p>
<a href="javascript:;" onclick="showWindow('miscreport54634955', 'misc.php?mod=report&amp;rtype=post&amp;rid=54634955&amp;tid=2085764&amp;fid=24', 'get', -1);return false;">举报</a>
</p>
</div>
</div>
</td>
</tr>
<tr class="ad">
<td class="pls">
</td>
<td class="plc">
</td>
</tr>
</table>
</div><div id="post_54636309"><table cellpadding="0" cellspacing="0" class="plhin" id="pid54636309" summary="pid54636309">
<tr>
<a name="lastpost"></a><td class="pls" rowspan="2">
<div class="pls cl favatar" id="favatar54636309">
<div class="pi">
<div class="authi"><a class="xw1" href="home.php?mod=space&amp;uid=1229473" rel="nofollow" target="_blank">小鸡眯眼</a>
</div>
</div>
<div class="p_pop blk bui card_gender_0" id="userinfo54636309" style="display: none; margin-top: -11px;">
<div class="m z">
<div id="userinfo54636309_ma"></div>
</div>
<div class="i y">
<div>
<strong><a class="xi2" href="home.php?mod=space&amp;uid=1229473" target="_blank">小鸡眯眼</a></strong>
<em>当前在线</em>
</div><dt>好友</dt><dd><a class="xi2" href="home.php?mod=space&amp;uid=1229473&amp;do=friend&amp;view=me&amp;from=space" target="_blank">0</a></dd>
<dt>阅读权限</dt><dd>10</dd>
<span style="color:Blue;"><dt>听众</dt><dd><a class="xi2" href="home.php?mod=follow&amp;do=follower&amp;uid=1229473" target="_blank">1</a></dd>
<dt>最后登录</dt><dd>2026-1-11</dd>
<div class="imicn">
<a href="home.php?mod=space&amp;uid=1229473&amp;do=profile" target="_blank" title="查看详细资料"><img alt="查看详细资料" src="../common_images/userinfo.gif"/></a>
</div>
<div id="avatarfeed"><span id="threadsortswait"></span></div>
</span></div>
</div>
<div>
<div class="avatar" onmouseover="showauthor(this, 'userinfo54636309')"><a class="avtm" href="home.php?mod=space&amp;uid=1229473" rel="nofollow" target="_blank"><img src="../common_images/noavatar_middle.gif"/></a></div>
</div>
<div class="tns xg2"><table cellpadding="0" cellspacing="0"><th><p><a class="xi2" href="home.php?mod=space&amp;uid=1229473&amp;do=thread&amp;type=thread&amp;view=me&amp;from=space">14</a></p>主题</th><th><p><a class="xi2" href="home.php?mod=space&amp;uid=1229473&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space">67</a></p>回帖</th><td><p><a class="xi2" href="home.php?mod=space&amp;uid=1229473&amp;do=profile">43</a></p>积分</td></table></div>
<p class="side-group"><em><a href="home.php?mod=spacecp&amp;ac=usergroup&amp;gid=10" target="_blank">锋芒初露</a></em></p>
<p class="side-star"><span id="g_up54636309" onmouseover="showMenu({'ctrlid':this.id, 'pos':'12!'});"><img alt="Rank: 1" src="../common_images/star_level1.gif"/></span></p>
<div class="tip tip_4" id="g_up54636309_menu" style="display: none;"><div class="tip_horn"></div><div class="tip_c">锋芒初露, 积分 43, 距离下一级还需 157 积分</div></div>
<dl class="pil cl credit-list">
<span amount="0" class="cr-digest">
<dt>精华</dt>
<dd>0</dd>
</span>
<span amount="0 点" class="cr-ext1">
<dt>威望</dt>
<dd>0 点</dd>
</span>
<span amount="28 点" class="cr-ext6">
<dt>热心值</dt>
<dd>28 点</dd>
</span>
<span amount="1 点" class="cr-ext4">
<dt>悬赏值</dt>
<dd>1 点</dd>
</span>
<span class="cr-follower">
<dt>听众</dt>
<dd><a class="xi2" href="home.php?mod=follow&amp;do=follower&amp;uid=1229473" target="_blank">1</a></dd>
</span>
<span amount="0 点" class="cr-ext3">
<dt>贡献值</dt>
<dd>0 点</dd>
</span>
<span class="cr-ext2">
<dt>吾爱币</dt>
<dd>462 CB</dd>
</span>
<span amount="0 次" class="cr-ext8">
<dt>违规</dt>
<dd>0 次</dd>
</span>
<dt>注册时间</dt>
<dd>2019-11-11</dd>
</dl>
</div>
</td>
<td class="plc">
<div class="pi">
<strong>
<a href="forum.php?mod=redirect&amp;goto=findpost&amp;ptid=2085764&amp;pid=54636309" id="postnum54636309" onclick="setCopy(this.href, '帖子地址复制成功');return false;">
<font color="red"><b>沙发</b></font></a>
</strong>
<div class="pti">
<div class="pdbt">
</div>
<div class="authi">
<img class="authicn vm" id="authicon54636309" src="../common_images/ico_lz.png"/>
<span class="firstauthor"> 楼主</span><span class="pipe">|</span>
<span class="res-author"><a class="xi2" href="home.php?mod=space&amp;uid=1229473" target="_blank">小鸡眯眼</a>
</span><em id="authorposton54636309"><span class="poston">发表于</span> 2026-1-11 21:39</em>
<span class="pipe">|</span>
<a href="forum.php?mod=viewthread&amp;tid=2085764&amp;page=1&amp;authorid=1229473" rel="nofollow">只看该作者</a>
<span class="pipe">|</span><font color="red">楼主</font></div>
</div>
</div><div class="pct"><div class="pcb">
<div class="t_fsz">
<table cellpadding="0" cellspacing="0"><tr><td class="t_f" id="postmessage_54636309">
另外修改的一个版本：https://chuan.diuta.com/</td></tr></table>
</div>
<div class="cm" id="comment_54636309">
</div>
<div id="post_rate_div_54636309"></div>
</div>
</div>
</td></tr>
<tr><td class="plc plm">
<div class="vw50_kfc_pb"><a href="https://www.52pojie.cn/thread-143136-1-1.html" target="_blank"><font color="red"> 【吾爱破解论坛总版规】 - [让你充分了解吾爱破解论坛行为规则]</font></a></div></td>
</tr>
<tr id="_postposition54636309"></tr>
<tr>
<td class="pls"></td>
<td class="plc" style="overflow:visible;">
<div class="po hin">
<div class="pob cl">
<em>
<a class="cmmnt" href="forum.php?mod=misc&amp;action=comment&amp;tid=2085764&amp;pid=54636309&amp;extra=page%3D1&amp;page=1" onclick="showWindow('comment', this.href, 'get', 0)">点评</a><a class="fastre" href="forum.php?mod=post&amp;action=reply&amp;fid=24&amp;tid=2085764&amp;repquote=54636309&amp;extra=page%3D1&amp;page=1" onclick="showWindow('reply', this.href)" rel="nofollow">回复</a>
<a class="replyadd" href="forum.php?mod=misc&amp;action=postreview&amp;do=support&amp;tid=2085764&amp;pid=54636309&amp;hash=7f5fdc25" onclick="ajaxmenu(this, 3000, 1, 0, '43', '');return false;" onmouseover="this.title = ($('review_support_54636309').innerHTML ? $('review_support_54636309').innerHTML : 0) + ' 人 支持'">支持 <span id="review_support_54636309"></span></a>
</em>
<p>
<a href="javascript:;" onclick="showWindow('rate', 'forum.php?mod=misc&amp;action=rate&amp;tid=2085764&amp;pid=54636309', 'get', -1);return false;">免费评分</a>
<a href="javascript:;" onclick="showWindow('miscreport54636309', 'misc.php?mod=report&amp;rtype=post&amp;rid=54636309&amp;tid=2085764&amp;fid=24', 'get', -1);return false;">举报</a>
</p>
</div>
</div>
</td>
</tr>
<tr class="ad">
<td class="pls">
</td>
<td class="plc">
</td>
</tr>
</table>
</div><div class="pl" id="postlistreply"><div class="viewthread_table" id="post_new" style="display: none"></div></div>
</div>
<form autocomplete="off" id="modactions" method="post" name="modactions">
<input name="formhash" type="hidden" value="7f5fdc25"/>
<input name="optgroup" type="hidden"/>
<input name="operation" type="hidden"/>
<input name="listextra" type="hidden" value="page%3D1"/>
<input name="page" type="hidden" value="1"/>
</form>
<div class="pgs mtm mbm cl">
<span class="pgb y" id="visitedforumstmp" onmouseover="$('visitedforums').id = 'visitedforumstmp';this.id = 'visitedforums';showMenu({'ctrlid':this.id,'pos':'21'})"><a href="forum-24-1.html">返回列表</a></span>
<a href="javascript:;" id="newspecialtmp" onclick="showWindow('newthread', 'forum.php?mod=post&amp;action=newthread&amp;fid=24')" onmouseover="$('newspecial').id = 'newspecialtmp';this.id = 'newspecial';showMenu({'ctrlid':this.id})" title="发新帖"><img alt="发新帖" src="../common_images/pn_post.png"/></a>
<a href="javascript:;" id="post_replytmp" onclick="showWindow('reply', 'forum.php?mod=post&amp;action=reply&amp;fid=24&amp;tid=2085764')" title="回复"><img alt="回复" src="../common_images/pn_reply.png"/></a>
</div>
<div class="area" id="diyfastposttop"></div>
<div class="pl bm bmw" id="f_pst">
<form action="forum.php?mod=post&amp;action=reply&amp;fid=24&amp;tid=2085764&amp;extra=page%3D1&amp;replysubmit=yes&amp;infloat=yes&amp;handlekey=fastpost" autocomplete="off" id="fastpostform" method="post" onsubmit="return fastpostvalidate(this)">
<table cellpadding="0" cellspacing="0">
<tr>
<td class="pls">
<div class="avatar avtm"><img onerror="this.onerror=null;this.src='https://avatar.52pojie.cn/images/noavatar_middle.gif'" src="../common_images/68_avatar_middle.jpg"/></div></td>
<td class="plc">
<span id="fastpostreturn"></span>
<div class="cl">
<div id="fastposteditor">
<div class="tedt mtn">
<div class="bar">
<span class="y">
<a href="forum.php?mod=post&amp;action=reply&amp;fid=24&amp;tid=2085764" onclick="return switchAdvanceMode(this.href)">高级模式</a>
</span>
<div class="fpd">
<a class="fbld" href="javascript:;" onclick="seditor_insertunit('fastpost', '[b]', '[/b]');doane(event);" title="文字加粗">B</a>
<a class="fclr" href="javascript:;" id="fastpostforecolor" onclick="showColorBox(this.id, 2, 'fastpost');doane(event);" title="设置文字颜色">Color</a>
<a class="fmg" href="javascript:;" id="fastpostimg" onclick="seditor_menu('fastpost', 'img');doane(event);" title="图片">Image</a>
<a class="flnk" href="javascript:;" id="fastposturl" onclick="seditor_menu('fastpost', 'url');doane(event);" title="添加链接">Link</a>
<a class="fqt" href="javascript:;" id="fastpostquote" onclick="seditor_menu('fastpost', 'quote');doane(event);" title="引用">Quote</a>
<a class="fcd" href="javascript:;" id="fastpostcode" onclick="seditor_menu('fastpost', 'code');doane(event);" title="代码">Code</a>
<a class="fsml" href="javascript:;" id="fastpostsml" onclick="showMenu({'ctrlid':this.id,'evt':'click','layer':2});return false;">Smilies</a>
<a class="fat" href="javascript:;" id="fastpostat" onclick="seditor_menu('fastpost', 'at');doane(event);" title="@朋友">@朋友</a>
<span class="pipe z">|</span><span id="spanButtonPlaceholder">上传</span></div></div>
<div class="area">
<textarea class="pt" cols="80" id="fastpostmessage" name="message" onkeydown="seditor_ctlent(event, 'fastpostvalidate($(\'fastpostform\'))');" rows="6" tabindex="4"></textarea>
</div>
</div>
</div>
</div>
<div id="seccheck_fastpost">
</div>
<input id="posttime" name="posttime" type="hidden" value="1768142919"/>
<div class="upfl">
<table border="0" cellpadding="0" cellspacing="0" id="attach_tblheader" style="display: none;">
<tr>
<td>点击附件文件名添加到帖子内容中</td>
<td class="atds">描述</td>
<td class="attv">
阅读权限
<img alt="Tip" class="vm" onmouseover="showTip(this)" src="../common_images/faq.gif" tip="阅读权限按由高到低排列，高于或等于选中组的用户才可以阅读，&lt;b&gt;&lt;font color=blue&gt;添加权限后请勿勾选下方的“转播给听众”功能，否则会导致帖子内容泄漏。&lt;/font&gt;&lt;/b&gt;"/>
</td>
<td class="attpr">吾爱币</td><td class="attc"></td>
</tr>
</table>
<div class="fieldset flash" id="attachlist"></div>
</div>
<input name="formhash" type="hidden" value="7f5fdc25"/>
<input name="usesig" type="hidden" value="1"/>
<input name="subject" type="hidden" value="  "/>
<p class="ptm pnpost">
<a class="y" href="home.php?mod=spacecp&amp;ac=credit&amp;op=rule&amp;fid=24" target="_blank">本版积分规则</a>
<button class="pn pnc vm" id="fastpostsubmit" name="replysubmit" onmouseover="checkpostrule('seccheck_fastpost', 'ac=reply');this.onmouseover=null" tabindex="5" type="submit" value="replysubmit"><strong>发表回复</strong></button>
<span style="padding:0 5px; color:#f44336"><strong>警告：本版块禁止<a href="forum.php?mod=redirect&amp;goto=findpost&amp;ptid=143136&amp;pid=9180499" style="font-style: italic; text-decoration-line: underline;" target="_blank">『灌水』</a>或回复与主题无关内容，违者重罚！</strong></span>
<label class="lb"><input class="pc" name="adddynamic" type="checkbox" value="1"/>回帖并转播</label>
<label for="fastpostrefresh"><input class="pc" id="fastpostrefresh" type="checkbox"/>回帖后跳转到最后一页</label>
</p>
</td>
</tr>
</table>
</form>
</div>
<div class="p_pop blk cl" id="visitedforums_menu" style="display: none;">
<table cellpadding="0" cellspacing="0">
<tr>
<td id="v_forums">
<h3 class="mbn pbn bbda xg1">浏览过的版块</h3>
<ul class="xl xl1">
<li><a href="forum-5-1.html">『脱壳破解区』</a></li><li><a href="forum-69-1.html">『Android UnPackMe◇CrackMe◇KeyGenMe◇ReverseMe』</a></li><li><a href="forum-13-1.html">『站点公告』</a></li><li><a href="forum-2-1.html">『原创发布区』</a></li></ul>
</td>
</tr>
</table>
</div>
</div>
<div class="wp mtn">
<div class="area" id="diy3"></div>
</div>
</div>
<div class="wp vw50_kfc_f"><div class="res-footer-note"><p align="left"><br/><font color="#ff0000">免责声明：<br/>吾爱破解所发布的一切破解补丁、注册机和注册信息及软件的解密分析文章仅限用于学习和研究目的；不得将上述内容用于商业或者非法用途，否则，一切后果请用户自负。本站信息来自网络，版权争议与本站无关。您必须在下载后的24个小时之内，从您的电脑中彻底删除上述内容。如果您喜欢该程序，请支持正版软件，购买注册，得到更好的正版服务。如有侵权请邮件与我们联系处理。</font></p>
<p align="right"><font color="#ff0000" face="Comic Sans MS">Mail To:Service@52pojie.cn</font></p></div></div>
<style type="text/css"> 
#scrolltop {
   display: none;
}
ul#navmenu ul
{ 
display: none; 
position: absolute; 
left: -233px;
bottom: 5px;
} 
ul#navmenu li:hover ul ul, 
ul#navmenu li.iehover ul ul,  { 
display: none; 
} 
ul#navmenu li:hover ul, 
ul#navmenu ul li:hover ul, 
ul#navmenu ul ul li:hover ul, 
ul#navmenu li.iehover ul, 
ul#navmenu ul li.iehover ul, 
ul#navmenu ul ul li.iehover ul { 
display: block; 
} 

#jz52top a {margin: 6px 0;}

#jz52top { z-index: 200; visibility: visible; right: 5px; }

#jz52topa { visibility: hidden;}
#jz52top, #jz52top a { border: none;}


#jz52top { position: fixed; bottom: 70px; display: block; width: 40px; background: none repeat scroll 0% 0% transparent; border: 0px #cdcdcd solid; border-radius: 3px; border-top: 0; cursor: pointer; }
#jz52top:hover { text-decoration: none; }

#jz52top a { display: block; width: 40px; height: 40px; padding: 0; line-height: 12px; text-align: center; color: #787878; text-decoration: none; background: #f8f8f8 url('source/plugin/jz52_top/template/jz52top1.png') no-repeat 0 0; border-top: 0px #cdcdcd solid; }

                a.jz52topa:hover { background-position: -40px 0px !important;}
a.replyfast { background-position: 0 -40px !important; }
a.replyfast:hover { background-position: -40px -40px !important;}
a.returnlist { background-position: 0 -80px !important; }
a.returnlist:hover { background-position: -40px -80px !important;}
a.returnboard { background-position: -80px -240px !important; }
a.returnboard:hover { background-position: -120px -240px !important;}
a.jzqr { background-position: 0 -120px !important; }
a.jzqr:hover { background-position: -40px -120px !important;}
                a.jzwx { background-position: 0 -320px !important; }
a.jzwx:hover { background-position: -40px -320px !important;}				
a.jzkf { background-position: -80px 0px !important; }
a.jzkf:hover { background-position: -120px -0px !important;}
a.jzfx { background-position: -80px -40px !important; }
a.jzfx:hover { background-position: -120px -40px !important;}
.jzfxn { background: #fff !important; width: 231px !important; height: 260px !important; }
a.jzlast { background-position: -80px -80px !important; }
a.jzlast:hover { background-position: -120px -80px !important;}
a.jznext { background-position: -80px -120px !important; }
a.jznext:hover { background-position: -120px -120px !important;}	
a.jzxyy { background-position: -80px -120px !important; }
a.jzxyy:hover { background-position: -120px -360px !important;}			
a.jzsct { background-position: 0px -160px !important; }
a.jzsct:hover { background-position: -40px -160px !important;}				
a.jzscb { background-position: -80px -160px !important; }
a.jzscb:hover { background-position: -120px -160px !important;}				
a.jzqqq { background-position: 0px -200px !important; }
a.jzqqq:hover { background-position: -40px -200px !important;}	
                a.jzsoso { background-position: -80px -320px !important; }
a.jzsoso:hover { background-position: -120px -320px !important;}					
a.jzwo { background-position: -80px -200px !important; }
a.jzwo:hover { background-position: -120px -200px !important;}
a.jzzdy { background-position: 0px -240px !important; }
a.jzzdy:hover { background-position: -40px -240px !important;}
a.jzfbzt { background-position: 0px -280px !important; }
a.jzfbzt:hover { background-position: -40px -280px !important;}
a.jzkfzx { background-position: -80px -280px !important; }
a.jzkfzx:hover { background-position: -120px -280px !important;}


#jzqrn { background: #fff !important; width: 231px !important; height: 260px !important; }
#jzqrn { border: 1px solid rgb(210, 210, 210); text-align: center; }
#jzqrn p {
    font-size: 15px;
    padding-bottom: 15px;
    text-align: center;
color: #999;
    font-family: Microsoft YaHei;
}
#jzwon { background: #fff !important; width: 231px !important; height: 260px !important; }
#jzwon { border: 1px solid rgb(210, 210, 210); }
#jzfxn { border: 1px solid rgb(210, 210, 210); }
#jzfxn h3 {
    height: 23px;
    background: none repeat scroll 0% 0% rgb(250, 250, 250);
    border-bottom: 1px solid rgb(236, 236, 236);
    padding: 10px 0px 0px 10px;
}
#jzfxn .bdsharebuttonbox { padding: 13px 0px 0px 20px; }
#jzfxn .bdsharebuttonbox a, #jzfxn .bdsharebuttonbox .bds_more {
    float: left;
    font-size: 12px;
    padding-left: 25px;
    line-height: 16px;
text-align: left;
    height: 16px;
    background: url("http://bdimg.share.baidu.com/static/api/img/share/icons_1_16.png?v=01d441d0.png") no-repeat scroll 0px 0px ;
    background-repeat: no-repeat;
    cursor: pointer;
    margin: 6px 6px 6px 0px;
text-indent: 0;
    overflow: hidden;
width: 68px;
}
#jzfxn .bdsharebuttonbox .bds_qzone {
    background-position: 0px -52px !important;
}
#jzfxn .bdsharebuttonbox .bds_tsina {
    background-position: 0px -104px !important;
}
#jzfxn .bdsharebuttonbox .bds_tqq {
    background-position: 0px -260px !important;
}
#jzfxn .bdsharebuttonbox .bds_renren {
    background-position: 0px -208px !important;
}
#jzfxn .bdsharebuttonbox .bds_tqf {
    background-position: 0px -364px !important;
}
#jzfxn .bdsharebuttonbox .bds_tieba {
    background-position: 0px -728px !important;
}
#jzfxn .bdsharebuttonbox .bds_sqq {
    background-position: 0px -2652px !important;
}
#jzfxn .bdsharebuttonbox .bds_hi {
    background-position: 0px -416px !important;
}
#jzfxn .bdsharebuttonbox .bds_isohu {
    background-position: 0px -3016px !important;
}
#jzfxn .bdsharebuttonbox .bds_weixin {
    background-position: 0px -1612px !important;
}
#jzfxn .bdsharebuttonbox .bds_t163 {
    background-position: 0px -832px !important;
}
#jzfxn .bdsharebuttonbox .bds_tsohu {
    background-position: 0px -520px !important;
}
#jzfxn .bdsharebuttonbox .bds_baidu {
    background-position: 0px -2600px !important;
}
#jzfxn .bdsharebuttonbox .bds_qq {
    background-position: 0px -624px !important;
}
#jz52top a b {
    visibility: hidden;
    font-weight: normal;
}
</style>
<div id="jz52top">
<span><a class="replyfast" href="forum.php?mod=post&amp;action=reply&amp;fid=24&amp;tid=2085764&amp;extra=page%3D1&amp;page=" onclick="showWindow('reply', this.href)" title="快速回复"><b>快速回复</b></a></span>
<span><a class="jzsct" href="home.php?mod=spacecp&amp;ac=favorite&amp;type=thread&amp;id=2085764&amp;formhash=7f5fdc25" id="k_favorite" onclick="showWindow(this.id, this.href, 'get', 0);" onmouseover="this.title = $('favoritenumber').innerHTML + ' 人已收藏'" title="!fav_thread!"><b>收藏帖子</b></a></span>
<span>
<a class="returnlist" hidefocus="true" href="forum-24-1.html" title="返回列表"><b>返回列表</b></a>
</span>
<span><ul id="navmenu"> <li><a class="jzwx" href="javascript:void(0)" title="关注微信"><b>关注微信</b></a> <ul> <div id="jzqrn">
<img alt="wx" height="228" src="../common_images/weixin.jpg" width="228"/>
<p>微信签到每天都送论坛币！</p>
</div> </ul></li></ul> </span>
<span>
<div id="goTopBtn" style="DISPLAY: none"><a class="jz52topa" title="返回顶部"><b>返回顶部</b></a></div>
</span>
</div>
<div class="wp cl" id="ft">
<div class="y" id="flk">
<p>
<a href="forum.php?mod=rss" target="_blank">RSS订阅</a><span class="pipe">|</span><a href="forum.php?mod=misc&amp;action=showdarkroom">小黑屋</a><span class="pipe">|</span><a href="thread-2084166-1-1.html" target="_blank">处罚记录</a><span class="pipe">|</span><a href="mailto:Service@52pojie.cn" target="_blank">联系我们</a><span class="pipe">|</span><strong><a href="https://www.52pojie.cn" target="_blank">吾爱破解 - 52pojie.cn</a></strong>
( <a href="https://beian.miit.gov.cn/" rel="nofollow" target="_blank">京ICP备16042023号 | 京公网安备 11010502030087号</a> )</p>
<p class="xs0">
GMT+8, 2026-1-11 22:48<span id="debuginfo">
</span>
</p>
</div>
<div id="frt">
<p>Powered by <strong>Discuz!</strong></p>
<p class="xs0">Copyright © 2001-2020, Tencent Cloud.</p>
</div></div>
<div id="scrolltop">
<span><a class="replyfast" href="forum.php?mod=post&amp;action=reply&amp;fid=24&amp;tid=2085764&amp;extra=page%3D1&amp;page=1" onclick="showWindow('reply', this.href)" title="快速回复"><b>快速回复</b></a></span>
<span hidefocus="true"><a class="scrolltopa" onclick="window.scrollTo('0','0')" title="返回顶部"><b>返回顶部</b></a></span>
<span>
<a class="returnlist" hidefocus="true" href="forum-24-1.html" title="返回列表"><b>返回列表</b></a>
</span>
</div>
<script>var STYLEID = '1', STATICURL = 'https://static.52pojie.cn/static/', IMGDIR = 'https://static.52pojie.cn/static/image/common', VERHASH = 'BC3', charset = 'gbk', discuz_uid = '588268', cookiepre = 'htVC_2132_', cookiedomain = '', cookiepath = '/', showusercard = '0', attackevasive = '0', disallowfloat = 'login|newthread', creditnotice = '1|威望|点,2|吾爱币|CB,3|贡献值|点,4|悬赏值|点,5|采纳率|%,6|热心值|点,8|违规|次', defaultstyle = './template/default/style/t5', REPORTURL = 'aHR0cHM6Ly93d3cuNTJwb2ppZS5jbi90aHJlYWQtMjA4NTc2NC0xLTEuaHRtbA==', SITEURL = 'https://www.52pojie.cn/', JSPATH = 'https://static.52pojie.cn/cache/', CSSPATH = 'https://static.52pojie.cn/cache/style_', DYNAMICURL = '';</script><script src="https://static.52pojie.cn/cache/common.js?BC3"></script><script>HTMLNODE.className += ' widthauto'</script><script src="https://static.52pojie.cn/cache/forum.js?BC3"></script><script language="javascript">delayShow($('myprompt'), function() {showMenu({'ctrlid':'myprompt','duration':3})});</script><script>
initSearchmenu('scbar', '');
</script><script>var fid = parseInt('24'), tid = parseInt('2085764');</script><script src="https://static.52pojie.cn/cache/forum_viewthread.js?BC3"></script><script>zoomstatus = parseInt(1);var imagemaxwidth = '1080';var aimgcount = new Array();</script><script>
function votekickupdate() {
var obj = $('votes');
obj.innerHTML = parseInt(obj.innerHTML) + 1;
}
</script><script reload="1">
aimgcount[54634955] = ['2826397'];
attachimggroup(54634955);
var aimgfid = 0;
</script><script>
var postminchars = parseInt('8');
var postmaxchars = parseInt('0');
var disablepostctrl = parseInt('0');
</script><script src="https://static.52pojie.cn/cache/seditor.js?BC3"></script><script reload="1">smilies_show('fastpostsmiliesdiv', 8, 'fastpost');</script><script src="https://static.52pojie.cn/cache/at.js?BC3"></script><script>
var editorid = '';
var ATTACHNUM = {'imageused':0,'imageunused':0,'attachused':0,'attachunused':0}, ATTACHUNUSEDAID = new Array(), IMGUNUSEDAID = new Array();
</script><script src="https://static.52pojie.cn/cache/upload.js?BC3"></script><script>
var upload = new SWFUpload({
upload_url: "https://www.52pojie.cn/misc.php?mod=swfupload&action=swfupload&operation=upload&fid=24",
post_params: {"uid" : "588268", "hash":"8350575a36dbfe0e745a2e3db224679b"},
file_size_limit : "3072",
file_types : "*.rar;*.7z;*.zip;*.txt;*.jpg;*.gif;*.png",
file_types_description : "All Support Formats",
file_upload_limit : 0,
file_queue_limit : 0,
swfupload_preload_handler : preLoad,
swfupload_load_failed_handler : loadFailed,
file_dialog_start_handler : fileDialogStart,
file_queued_handler : fileQueued,
file_queue_error_handler : fileQueueError,
file_dialog_complete_handler : fileDialogComplete,
upload_start_handler : uploadStart,
upload_progress_handler : uploadProgress,
upload_error_handler : uploadError,
upload_success_handler : uploadSuccess,
upload_complete_handler : uploadComplete,
button_image_url : "https://static.52pojie.cn/static/image/common/uploadbutton_small.png",
button_placeholder_id : "spanButtonPlaceholder",
button_width: 17,
button_height: 25,
button_cursor:SWFUpload.CURSOR.HAND,
button_window_mode: "transparent",
custom_settings : {
progressTarget : "attachlist",
uploadSource: 'forum',
uploadType: 'attach',
maxSizePerDay: 52428800,
uploadFrom: 'fastpost'
},
debug: false
});
</script><script>if(getcookie('fastpostrefresh') == 1) {$('fastpostrefresh').checked=true;}</script><script>
$("fastpostmessage").style.background = 'url(https://static.52pojie.cn/static/image/common/bj.gif) no-repeat left top';

$("fastpostmessage").onfocus = function (){
$("fastpostmessage").style = '';
}
$("fastpostmessage").onblur = function (){
if($("fastpostmessage").value == ''){
$("fastpostmessage").style.background = 'url(https://static.52pojie.cn/static/image/common/bj.gif) no-repeat left top';
}
}

 </script><script>
new lazyload();
</script><script>document.onkeyup = function(e){keyPageScroll(e, 0, 0, 'forum.php?mod=viewthread&tid=2085764&extra=page%3D1', 1);}</script><script>
function succeedhandle_followmod(url, msg, values) {
var fObj = $('followmod_'+values['fuid']);
if(values['type'] == 'add') {
fObj.innerHTML = '不收听';
fObj.href = 'home.php?mod=spacecp&ac=follow&op=del&fuid='+values['fuid'];
} else if(values['type'] == 'del') {
fObj.innerHTML = '收听TA';
fObj.href = 'home.php?mod=spacecp&ac=follow&op=add&hash=7f5fdc25&fuid='+values['fuid'];
}
}
fixed_avatar([54634955,54636309], 1);
</script><script type="text/x-mathjax-config">
	MathJax.Hub.Config({ 
		tex2jax: {
			inlineMath: [["$","$"], ['\\(','\\)']],
			processClass: "math-render",
			ignoreClass: "pct",
		},
		skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code','a'],
		showProcessingMessages: false,
		messageStyle: "none",
		TeX: { equationNumbers: {autoNumber: "AMS"} },
	});
</script><script src="https://lib.baomitu.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&amp;noContrib"></script><script>
var mw_brush = eval({"asm":["Asm","true"],"c":["C","true"],"cpp":["C++","true"],"csharp":["C#","true"],"java":["Java","true"],"python":["Python","true"],"lua":["Lua","true"],"html":["HTML","true"],"php":["PHP","true"],"javascript":["JavaScript","true"],"css":["CSS","true"],"golang":["Golang","true"],"objc":["Objective-C","true"],"applescript":["AppleScript","true"],"actionscript3":["Actionscript3","true"],"bash":["Bash shell","true"],"coldfusion":["ColdFusion","true"],"delphi":["Delphi","true"],"diff":["Diff","true"],"erlang":["Erlang","true"],"groovy":["Groovy","true"],"javafx":["JavaFX","true"],"pascal":["Pascal","true"],"patch":["Patch","true"],"perl":["Perl","true"],"text":["Plain Text","true"],"powershell":["PowerShell","true"],"ruby":["Ruby","true"],"rails":["Ruby on Rails","true"],"sass":["Sass","true"],"scala":["Scala","true"],"scss":["Scss","true"],"shell":["Shell","true"],"sql":["SQL","true"],"vb":["Visual Basic","true"],"vbnet":["Visual Basic .NET","true"],"xhtml":["XHTML","true"],"xml":["XML","true"],"xslt":["XSLT","true"],"aauto":["AAuto","true"],"il":["IL","true"]});
var mw_gutter = 1;
var mw_lang_codebox = { 'select_lang': '请输入要插入的代码<br>选择语言：', 'show_gutter': '显示行号：', 'your_code': '你的代码：', 'close': '关闭', 'submit': '提交', 'cancle': '取消' };
</script><script src="https://static.52pojie.cn/mw_syntaxhighlighter/static/js/mw_syntaxhighlighter.js?BC3"></script><script reload="1">mw_syntaxhighlighter("fastpost");</script><script src="https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shCore.js?ver=3.0.90"></script><script src="https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shAutoloader.js?ver=3.0.90"></script><script src="https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.90"></script><script>//<![CDATA[
	SyntaxHighlighter.autoloader(
	"applescript	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushAppleScript.js?ver=3.0.90"
	,"as3 actionscript3	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushAS3.js?ver=3.0.90"
	,"bash shell	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0.90"
	,"cf coldfusion	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushColdFusion.js?ver=3.0.90"
	,"cpp c	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushCpp.js?ver=3.0.90"
	,"c# c-sharp csharp	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.90"
	,"css	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushCss.js?ver=3.0.90"
	,"delphi pas pascal	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushDelphi.js?ver=3.0.90"
	,"diff patch	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushDiff.js?ver=3.0.90"
	,"erl erlang	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushErlang.js?ver=3.0.90"
	,"groovy	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushGroovy.js?ver=3.0.90"
	,"java	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushJava.js?ver=3.0.90"
	,"jfx javafx	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushJavaFX.js?ver=3.0.90"
	,"js jscript javascript	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.90"
	,"perl pl	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushPerl.js?ver=3.0.90"
	,"php	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.90"
	,"plain text	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushPlain.js?ver=3.0.90"
	,"ps powershell	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushPowerShell.js?ver=3.0.90"
	,"py python	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.90"
	,"rails ror ruby rb	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.90"
	,"sass scss	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushSass.js?ver=3.0.90"
	,"scala	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushScala.js?ver=3.0.90"
	,"sql	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushSql.js?ver=3.0.90"
	,"vb vbnet	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushVb.js?ver=3.0.90"
	,"xml xhtml xslt html	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.90"
	,"objc	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushObjC.js?ver=3.0.90"
	,"asm	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushAsm.js?ver=3.0.90"
	,"aauto	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushAAuto.js?ver=3.0.90"
	,"go golang	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushGo.js?ver=3.0.90"
	,"lua	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushLua.js?ver=3.0.90"
	,"il	https://static.52pojie.cn/mw_syntaxhighlighter/static/syntaxhighlighter3/scripts/shBrushIL.js?ver=3.0.90"
	);
	SyntaxHighlighter.defaults['auto-links'] = false;
	SyntaxHighlighter.defaults['quick-code'] = true;
	SyntaxHighlighter.defaults['title'] = '';
	SyntaxHighlighter.defaults['class-name'] = 'notranslate';
	SyntaxHighlighter.defaults['collapse'] = false;
	SyntaxHighlighter.defaults['first-line'] = 1;
	SyntaxHighlighter.defaults['gutter'] = true;
	SyntaxHighlighter.defaults['pad-line-numbers'] = 1;
	SyntaxHighlighter.defaults['smart-tabs'] = true;
	SyntaxHighlighter.defaults['tab-size'] = 4;
	SyntaxHighlighter.defaults['toolbar'] = true;
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter';
	SyntaxHighlighter.config.strings.noBrush = "Can\'t find brush for: ";
	SyntaxHighlighter.config.strings.brushNotHtmlScript = "Brush wasn\'t configured for html-script option: ";
	SyntaxHighlighter.all();
	
//]]></script><script>
var mw_libversion = '3.0.90';
var mw_lang_toolbar = {'copyed': '代码已复制到剪贴板'};
</script><script src="https://static.52pojie.cn/mw_syntaxhighlighter/static/js/toolbar.js?BC3"></script><script async="" defer="" src="/static/js/index.min.js"></script><script src="https://static.52pojie.cn/noti/noti.js?BC3"></script><script>
time=1768142919;
activemode = true;
hookCredit();
if(activemode)ifvisible.now();
setTimeout(function () { noti_run('&type=3_3_1&h=7f5fdc25', 10000, 180000);}, 100);
</script><script> 
function goTopEx() {
 var obj = document.getElementById("goTopBtn");

 function getScrollTop() {
 return document.documentElement.scrollTop || document.body.scrollTop;
 }

 function setScrollTop(value) {
 if (document.documentElement.scrollTop) {
 document.documentElement.scrollTop = value;
 } else {
 document.body.scrollTop = value;
 }

 }
 window.onscroll = function() {
 getScrollTop() > 0 ? obj.style.display = "" : obj.style.display = "none";
 var h = document.body.scrollHeight - getScrollTop() - obj.offsetTop - obj.offsetHeight;
 obj.style.bottom = 0 + "px";
 if (h < 350) {
 obj.style.bottom = 340 + "px";
 obj.style.top = "auto";
 }


 }
 obj.onclick = function() {
 function scrollToTop() {
 let y = getScrollTop();
 const interval = setInterval(function() {
 if (getScrollTop() - 5 > y) {
 // User trying to scroll - abort
 clearInterval(interval);
 return;
 }
 y = y / 1.1;
 setScrollTop(y);
 if (y < 1) {
 clearInterval(interval);
 setScrollTop(0);
 }
 }, 10);
 }
 scrollToTop()
 }
}
</script><script type="text/javascript">goTopEx();</script><script>
var _hmt = _hmt || [];
(function() {
 var hm = document.createElement("script");
 hm.src = "https://hm.baidu.com/hm.js?46d556462595ed05e05f009cdafff31a";
 var s = document.getElementsByTagName("script")[0]; 
 s.parentNode.insertBefore(hm, s);
})();
</script><script src="home.php?mod=spacecp&amp;ac=follow&amp;op=checkfeed&amp;rand=1768142919"></script><script>noticeTitle();</script><script>_attachEvent(window, 'scroll', function () { showTopLink(); });checkBlind();</script></body>
</html>
